# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ì–æ–ª–æ—Å–æ–≤–æ–≥–æ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ Irene
## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã v13.0.0

---

## üéØ **–°–∏—Ç—É–∞—Ü–∏—è**

**Irene Voice Assistant** ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ—Ñ—Ñ–ª–∞–π–Ω –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ —è–∑—ã–∫–µ Python. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è, —Ä–∞—Å—à–∏—Ä—è–µ–º–æ–π –ø–ª–∞–≥–∏–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ö.

### –ö–ª—é—á–µ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **–û—Ñ—Ñ–ª–∞–π–Ω-–ø–µ—Ä–≤—ã–π –ø–æ–¥—Ö–æ–¥**: –ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥
- **–ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –≥—Ä–∞—Ü–∏–æ–∑–Ω–æ–π –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–µ–π
- **–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å**: CLI, –≥–æ–ª–æ—Å, –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –ø–ª–∞–≥–∏–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

---

## ‚ö†Ô∏è **–ü—Ä–æ–±–ª–µ–º–∞—Ç–∏–∫–∞**

### –í—ã–∑–æ–≤—ã –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
1. **–°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞**: –ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ TTS –∏ ASR
2. **–ñ–µ—Å—Ç–∫–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å**: –ü—Ä—è–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
3. **–§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤**: 15+ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ –±–µ–∑ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏
4. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: –†–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫
5. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ü—Ä–æ–±–ª–µ–º—ã —Å concurrent-–æ–±—Ä–∞–±–æ—Ç–∫–æ–π

---

## ‚ùì **–ö–ª—é—á–µ–≤–æ–π –≤–æ–ø—Ä–æ—Å**

**–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –∫–æ—Ç–æ—Ä–∞—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:**
- –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–æ–º–∞–Ω–¥
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–º–∏–∫—Ä–æ—Ñ–æ–Ω, TTS)
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø–ª–∞–≥–∏–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É
- –ü—Ä–æ—Å—Ç–æ—Ç—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

---

## ‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**

## üèóÔ∏è **–û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã**

```mermaid
graph TB
    subgraph "üöÄ –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞"
        CLI[CLI Runner<br/>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å]
        WebAPI[WebAPI Runner<br/>FastAPI —Å–µ—Ä–≤–µ—Ä]
        Vosk[Vosk Runner<br/>ASR —Å–µ—Ä–≤–µ—Ä]
        Settings[Settings Runner<br/>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏]
    end
    
    subgraph "üß† –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã"
        AsyncCore[AsyncVACore<br/>–ì–ª–∞–≤–Ω—ã–π –¥–≤–∏–∂–æ–∫ v13]
        Context[ContextManager<br/>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º]
        Commands[CommandProcessor<br/>–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥]
        Timers[AsyncTimerManager<br/>–°–∏—Å—Ç–µ–º–∞ —Ç–∞–π–º–µ—Ä–æ–≤]
    end
    
    subgraph "‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏"
        CompMgr[ComponentManager<br/>–ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤]
        OptionalComps[–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã]
        MicComp[MicrophoneComponent]
        TTSComp[TTSComponent]
        AudioComp[AudioOutputComponent]
        WebComp[WebAPIComponent]
    end
    
    subgraph "üîå –ü–ª–∞–≥–∏–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞"
        PluginMgr[AsyncPluginManager<br/>–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–ª–∞–≥–∏–Ω–æ–≤]
        UniversalPlugins[–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã]
        UTTS[UniversalTTSPlugin]
        UASR[UniversalASRPlugin]
        ULLM[UniversalLLMPlugin]
        UAudio[UniversalAudioPlugin]
    end
    
    subgraph "üì•üì§ –í–≤–æ–¥/–í—ã–≤–æ–¥"
        InputMgr[InputManager]
        OutputMgr[OutputManager]
        Inputs[–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –≤–≤–æ–¥–∞]
        Outputs[–¶–µ–ª–∏ –≤—ã–≤–æ–¥–∞]
    end
    
    subgraph "üóÇÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è"
        ConfigMgr[ConfigManager<br/>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏]
        TOML[config.toml]
        ENV[–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è]
        Validation[Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—è]
    end
    
    CLI --> AsyncCore
    WebAPI --> AsyncCore
    Vosk --> AsyncCore
    Settings --> AsyncCore
    
    AsyncCore --> CompMgr
    AsyncCore --> PluginMgr
    AsyncCore --> InputMgr
    AsyncCore --> OutputMgr
    AsyncCore --> Context
    AsyncCore --> Commands
    AsyncCore --> Timers
    
    CompMgr --> OptionalComps
    OptionalComps --> MicComp
    OptionalComps --> TTSComp
    OptionalComps --> AudioComp
    OptionalComps --> WebComp
    
    PluginMgr --> UniversalPlugins
    UniversalPlugins --> UTTS
    UniversalPlugins --> UASR
    UniversalPlugins --> ULLM
    UniversalPlugins --> UAudio
    
    ConfigMgr --> TOML
    ConfigMgr --> ENV
    ConfigMgr --> Validation
    
    style AsyncCore fill:#e1f5fe,stroke:#01579b,stroke-width:3px
    style CompMgr fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    style PluginMgr fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style ConfigMgr fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
```

---

## üéØ **1. –Ø–î–†–û –°–ò–°–¢–ï–ú–´**

### 1.1 AsyncVACore - –ì–ª–∞–≤–Ω—ã–π –¥–≤–∏–∂–æ–∫

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `irene/core/engine.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–æ–º–∞–Ω–¥.

```python
class AsyncVACore:
    """–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞"""
    
    def __init__(self, config: CoreConfig):
        self.component_manager = ComponentManager(config.components)
        self.plugin_manager = AsyncPluginManager()
        self.input_manager = InputManager(self.component_manager)
        self.output_manager = OutputManager(self.component_manager)
        self.context_manager = ContextManager()
        self.timer_manager = AsyncTimerManager()
        self.command_processor = CommandProcessor()
```

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞:**
1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** (–º–∏–∫—Ä–æ—Ñ–æ–Ω, TTS, –∞—É–¥–∏–æ, –≤–µ–±-API)
2. **–ó–∞–ø—É—Å–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤** (–∫–æ–Ω—Ç–µ–∫—Å—Ç, —Ç–∞–π–º–µ—Ä—ã)
3. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤** (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∏ –≤–Ω–µ—à–Ω–∏–µ)
4. **–ó–∞–ø—É—Å–∫ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞**
5. **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∫–æ–º–∞–Ω–¥**

### 1.2 –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥

```mermaid
sequenceDiagram
    participant Input as –ò—Å—Ç–æ—á–Ω–∏–∫ –≤–≤–æ–¥–∞
    participant Core as AsyncVACore
    participant Processor as CommandProcessor
    participant Plugin as Plugin
    participant Output as –í—ã–≤–æ–¥
    
    Input->>Core: –ü–æ–ª—É—á–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞
    Core->>Processor: process_command()
    Processor->>Plugin: execute_command()
    Plugin-->>Plugin: –û–±—Ä–∞–±–æ—Ç–∫–∞
    Plugin->>Output: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    Output->>Input: –û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    
    Note over Core,Plugin: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
    Note over Plugin,Output: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ multiple outputs
```

---

## ‚öôÔ∏è **2. –°–ò–°–¢–ï–ú–ê –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ö–û–ú–ü–û–ù–ï–ù–¢–ê–ú–ò**

### 2.1 ComponentManager - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**–§–∏–ª–æ—Å–æ—Ñ–∏—è**: Graceful degradation - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å |
|-----------|-------------|------------------|
| **MicrophoneComponent** | `vosk`, `sounddevice` | –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ |
| **TTSComponent** | `pyttsx3` | –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ |
| **AudioOutputComponent** | `sounddevice`, `soundfile` | –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ |
| **WebAPIComponent** | `fastapi`, `uvicorn` | –í–µ–±-—Å–µ—Ä–≤–µ—Ä |

### 2.2 –ü—Ä–æ—Ñ–∏–ª–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

```mermaid
graph LR
    subgraph "üé§ Voice Assistant"
        VA_Mic[–ú–∏–∫—Ä–æ—Ñ–æ–Ω ‚úì]
        VA_TTS[TTS ‚úì]
        VA_Web[Web API ‚úì]
        VA_Audio[–ê—É–¥–∏–æ ‚úì]
    end
    
    subgraph "üåê API Server"
        API_Web[Web API ‚úì]
        API_Text[–¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç]
    end
    
    subgraph "üíª Headless"
        H_CLI[CLI —Ç–æ–ª—å–∫–æ]
        H_Min[–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º]
    end
    
    subgraph "üîß Custom"
        C_Mixed[–°–º–µ—à–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è]
    end
    
    style VA_Mic fill:#c8e6c9
    style VA_TTS fill:#c8e6c9
    style VA_Web fill:#c8e6c9
    style VA_Audio fill:#c8e6c9
    style API_Web fill:#bbdefb
    style H_CLI fill:#f8bbd9
    style C_Mixed fill:#fff3b0
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è:**
```python
def get_deployment_profile(self) -> str:
    available = set(self._components.keys())
    
    if {"microphone", "tts", "web_api"} <= available:
        return "Voice Assistant"
    elif "web_api" in available:
        return "API Server"
    elif available:
        return "Custom"
    else:
        return "Headless"
```

---

## üîå **3. –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–ê–Ø –ü–õ–ê–ì–ò–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê**

### 3.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Ä–µ–≤–æ–ª—é—Ü–∏—è

**–ë—ã–ª–æ**: 15+ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤
**–°—Ç–∞–ª–æ**: 4 —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–∞ + –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

### 3.2 –ü–∞—Ç—Ç–µ—Ä–Ω "–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–ª–∞–≥–∏–Ω + –ü—Ä–æ–≤–∞–π–¥–µ—Ä"

```mermaid
graph TB
    subgraph "üéØ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã (–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—ã)"
        UTTS[UniversalTTSPlugin<br/>üó£Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TTS]
        UASR[UniversalASRPlugin<br/>üé§ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ASR]
        ULLM[UniversalLLMPlugin<br/>üß† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ LLM]
        UAudio[UniversalAudioPlugin<br/>üîä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—É–¥–∏–æ]
    end
    
    subgraph "üîß TTS –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã"
        TTS_Console[Console TTS]
        TTS_ElevenLabs[ElevenLabs]
        TTS_Silero[Silero v4]
        TTS_Pyttsx[Pyttsx3]
        TTS_VOSK[VOSK TTS]
    end
    
    subgraph "üéôÔ∏è ASR –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã"
        ASR_VOSK[VOSK ASR]
        ASR_Whisper[OpenAI Whisper]
        ASR_Google[Google Cloud]
    end
    
    subgraph "ü§ñ LLM –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã"
        LLM_OpenAI[OpenAI GPT]
        LLM_Anthropic[Anthropic Claude]
        LLM_VseGPT[VseGPT]
        LLM_Local[–õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏]
    end
    
    subgraph "üîà Audio –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã"
        Audio_SoundDevice[SoundDevice]
        Audio_SimpleAudio[SimpleAudio]
        Audio_AudioPlayer[AudioPlayer]
        Audio_Console[Console Audio]
    end
    
    subgraph "üåê Web API"
        API_TTS["/tts/*"]
        API_ASR["/asr/*"]
        API_LLM["/llm/*"]
        API_Audio["/audio/*"]
    end
    
    UTTS --> TTS_Console
    UTTS --> TTS_ElevenLabs
    UTTS --> TTS_Silero
    UTTS --> TTS_Pyttsx
    UTTS --> TTS_VOSK
    
    UASR --> ASR_VOSK
    UASR --> ASR_Whisper
    UASR --> ASR_Google
    
    ULLM --> LLM_OpenAI
    ULLM --> LLM_Anthropic
    ULLM --> LLM_VseGPT
    ULLM --> LLM_Local
    
    UAudio --> Audio_SoundDevice
    UAudio --> Audio_SimpleAudio
    UAudio --> Audio_AudioPlayer
    UAudio --> Audio_Console
    
    UTTS --> API_TTS
    UASR --> API_ASR
    ULLM --> API_LLM
    UAudio --> API_Audio
    
    style UTTS fill:#ffecb3,stroke:#ff8f00,stroke-width:2px
    style UASR fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    style ULLM fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style UAudio fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
```

### 3.3 –ü—Ä–∏–Ω—Ü–∏–ø—ã —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤

**–ö–∞–∂–¥—ã–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–ª–∞–≥–∏–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:**

1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏**
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –≤—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
   - –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

2. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Web API**
   - RESTful —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
   - –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

3. **–ì—Ä–∞—Ü–∏–æ–∑–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - Fallback –∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
   - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö

**–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:**
```toml
[plugins.universal_tts]
default_provider = "silero_v4"
providers = ["console", "silero_v4", "elevenlabs"]

[plugins.universal_tts.provider_configs.silero_v4]
model_path = "models/silero_v4"
sample_rate = 48000
```

---

## üì•üì§ **4. –°–ò–°–¢–ï–ú–ê –í–í–û–î–ê/–í–´–í–û–î–ê**

### 4.1 –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –≤–≤–æ–¥–∞

```mermaid
graph LR
    subgraph "üì• –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –≤–≤–æ–¥–∞"
        CLI_Input[CLI Input<br/>üíª –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã]
        Mic_Input[Microphone Input<br/>üé§ VOSK ASR]
        Web_Input[Web Input<br/>üåê WebSocket/REST]
    end
    
    subgraph "üîÑ InputManager"
        IM[–ú–µ–Ω–µ–¥–∂–µ—Ä –≤–≤–æ–¥–∞<br/>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤]
        Queue[–û—á–µ—Ä–µ–¥—å –∫–æ–º–∞–Ω–¥<br/>AsyncQueue]
        Discovery[–ê–≤—Ç–æ–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ<br/>–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤]
    end
    
    subgraph "üß† –û–±—Ä–∞–±–æ—Ç–∫–∞"
        Core[AsyncVACore]
        Processor[CommandProcessor]
    end
    
    CLI_Input --> IM
    Mic_Input --> IM
    Web_Input --> IM
    
    IM --> Queue
    IM --> Discovery
    
    Queue --> Core
    Core --> Processor
    
    style IM fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    style Queue fill:#f1f8e9,stroke:#689f38,stroke-width:2px
```

### 4.2 –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞

```mermaid
graph LR
    subgraph "üß† –ò—Å—Ç–æ—á–Ω–∏–∫"
        Core[AsyncVACore]
        Results[–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ–º–∞–Ω–¥]
    end
    
    subgraph "üîÑ OutputManager"
        OM[–ú–µ–Ω–µ–¥–∂–µ—Ä –≤—ã–≤–æ–¥–∞<br/>–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤]
        Router[–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä<br/>–ø–æ —Ç–∏–ø–∞–º]
        Multi[–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π<br/>–≤—ã–≤–æ–¥]
    end
    
    subgraph "üì§ –¶–µ–ª–∏ –≤—ã–≤–æ–¥–∞"
        Text_Output[Text Output<br/>üìù –ö–æ–Ω—Å–æ–ª—å/–ª–æ–≥]
        TTS_Output[TTS Output<br/>üó£Ô∏è –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏]
        Web_Output[Web Output<br/>üåê WebSocket/HTTP]
    end
    
    Core --> Results
    Results --> OM
    
    OM --> Router
    OM --> Multi
    
    Router --> Text_Output
    Router --> TTS_Output
    Router --> Web_Output
    
    style OM fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    style Router fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
```

### 4.3 –ú–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **–ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π –≤–≤–æ–¥**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ü–µ–ª–µ–π –≤—ã–≤–æ–¥–∞
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞**: –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞
- **Graceful degradation**: –†–∞–±–æ—Ç–∞ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–∞–Ω–∞–ª–æ–≤

---

## üóÇÔ∏è **5. –°–ò–°–¢–ï–ú–ê –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò**

### 5.1 –ò–µ—Ä–∞—Ä—Ö–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```mermaid
graph TB
    subgraph "üìÅ –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"
        TOML[config.toml<br/>üìÑ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª]
        ENV[–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è<br/>üîß IRENE_*]
        Defaults[–ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é<br/>‚öôÔ∏è –í –∫–æ–¥–µ]
        CLI_Args[–ê—Ä–≥—É–º–µ–Ω—Ç—ã CLI<br/>üíª --–ø–∞—Ä–∞–º–µ—Ç—Ä—ã]
    end
    
    subgraph "üîÑ ConfigManager"
        CM[–ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏]
        Parser[TOML/JSON –ø–∞—Ä—Å–µ—Ä]
        Validator[Pydantic –≤–∞–ª–∏–¥–∞—Ç–æ—Ä]
        Merger[–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤]
        Watcher[–§–∞–π–ª–æ–≤—ã–π –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å]
    end
    
    subgraph "üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"
        CoreConfig[CoreConfig<br/>üèóÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏]
        ComponentConfig[ComponentConfig<br/>‚öôÔ∏è –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã]
        PluginConfig[PluginConfig<br/>üîå –ü–ª–∞–≥–∏–Ω—ã]
        SecurityConfig[SecurityConfig<br/>üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å]
        AssetConfig[AssetConfig<br/>üì¶ –†–µ—Å—É—Ä—Å—ã]
    end
    
    TOML --> CM
    ENV --> CM
    Defaults --> CM
    CLI_Args --> CM
    
    CM --> Parser
    CM --> Validator
    CM --> Merger
    CM --> Watcher
    
    Merger --> CoreConfig
    CoreConfig --> ComponentConfig
    CoreConfig --> PluginConfig
    CoreConfig --> SecurityConfig
    CoreConfig --> AssetConfig
    
    style CM fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    style Validator fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
```

### 5.2 –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ (–≤—ã—Å–æ–∫–∏–π ‚Üí –Ω–∏–∑–∫–∏–π):**
1. **–ê—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏** (`--host`, `--port`)
2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** (`IRENE_COMPONENTS__WEB_PORT`)
3. **–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** (`config.toml`)
4. **–ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** (–≤ –∫–æ–¥–µ)

### 5.3 –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**config.toml:**
```toml
[core]
name = "Irene"
version = "13.0.0"
debug = false
log_level = "INFO"
language = "ru-RU"

[components]
microphone = true
tts = true
audio_output = true
web_api = false

[components.web]
host = "127.0.0.1"
port = 5003
cors_origins = ["*"]

[plugins]
load_builtin = true
external_paths = ["./plugins", "./custom_plugins"]

[plugins.universal_tts]
default_provider = "silero_v4"
cache_enabled = true

[security]
enable_auth = false
api_keys = []

[assets]
models_root = "./models"
cache_root = "./cache"
data_root = "./data"
```

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
export IRENE_COMPONENTS__WEB_PORT=8080
export IRENE_PLUGINS__UNIVERSAL_TTS__DEFAULT_PROVIDER=elevenlabs
export IRENE_SECURITY__ENABLE_AUTH=true
export IRENE_ASSETS__MODELS_ROOT=/opt/irene/models
```

---

## üåê **6. WEB API –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø**

### 6.1 FastAPI –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `irene/runners/webapi_runner.py`

### 6.2 REST —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

```mermaid
graph LR
    subgraph "üåê Web API Endpoints"
        Root["/  <br/>üè† –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞"]
        Status["/status<br/>üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã"]
        Command["/command<br/>‚ö° –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥"]
        History["/history<br/>üìú –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π"]
        Health["/health<br/>üíö Health check"]
        Components["/components<br/>‚öôÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö"]
    end
    
    subgraph "üîå Plugin APIs"
        TTS_API["/tts/*<br/>üó£Ô∏è Text-to-Speech"]
        ASR_API["/asr/*<br/>üé§ Speech Recognition"]
        LLM_API["/llm/*<br/>üß† Language Models"]
        Audio_API["/audio/*<br/>üîä Audio Processing"]
    end
    
    subgraph "üîÑ Real-time"
        WebSocket["/ws<br/>‚ö° WebSocket"]
        Docs["/docs<br/>üìö OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è"]
    end
    
    style TTS_API fill:#ffecb3
    style ASR_API fill:#e1f5fe
    style LLM_API fill:#f3e5f5
    style Audio_API fill:#e8f5e8
    style WebSocket fill:#fff3e0
```

### 6.3 WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Å–≤—è–∑—å:**
- **–ö–ª–∏–µ–Ω—Ç ‚Üí –°–µ—Ä–≤–µ—Ä**: –ö–æ–º–∞–Ω–¥—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–°–µ—Ä–≤–µ—Ä ‚Üí –ö–ª–∏–µ–Ω—Ç**: –û—Ç–≤–µ—Ç—ã, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —Å—Ç–∞—Ç—É—Å

**–ü—Ä–∏–º–µ—Ä WebSocket —Å–æ–æ–±—â–µ–Ω–∏—è:**
```json
{
  "type": "command",
  "command": "–ø—Ä–∏–≤–µ—Ç",
  "timestamp": "2024-01-15T10:30:00Z"
}
```

---

## üöÄ **7. –†–ï–ñ–ò–ú–´ –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø**

### 7.1 –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞

```mermaid
graph TB
    subgraph "üñ•Ô∏è CLI –†–µ–∂–∏–º"
        CLI_Runner[CLIRunner]
        CLI_Interactive[–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º]
        CLI_Single[–û–¥–∏–Ω–æ—á–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞]
        CLI_Batch[–ü–∞–∫–µ—Ç–Ω—ã–π —Ä–µ–∂–∏–º]
    end
    
    subgraph "üåê Web API –†–µ–∂–∏–º"
        Web_Runner[WebAPIRunner]
        Web_FastAPI[FastAPI —Å–µ—Ä–≤–µ—Ä]
        Web_Static[–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã]
        Web_WebSocket[WebSocket —Å–µ—Ä–≤–µ—Ä]
    end
    
    subgraph "üé§ VOSK –†–µ–∂–∏–º"
        Vosk_Runner[VoskRunner]
        Vosk_Server[ASR —Å–µ—Ä–≤–µ—Ä]
        Vosk_Remote[–£–¥–∞–ª–µ–Ω–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ]
    end
    
    subgraph "‚öôÔ∏è Settings –†–µ–∂–∏–º"
        Settings_Runner[SettingsManagerRunner]
        Settings_GUI[–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å]
        Settings_Config[–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π]
    end
    
    CLI_Runner --> CLI_Interactive
    CLI_Runner --> CLI_Single
    CLI_Runner --> CLI_Batch
    
    Web_Runner --> Web_FastAPI
    Web_Runner --> Web_Static
    Web_Runner --> Web_WebSocket
    
    Vosk_Runner --> Vosk_Server
    Vosk_Runner --> Vosk_Remote
    
    Settings_Runner --> Settings_GUI
    Settings_Runner --> Settings_Config
    
    style CLI_Runner fill:#e3f2fd
    style Web_Runner fill:#e8f5e8
    style Vosk_Runner fill:#fff3e0
    style Settings_Runner fill:#fce4ec
```

### 7.2 –ö–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞

```bash
# CLI —Ä–µ–∂–∏–º
python -m irene.runners.cli
python -m irene.runners.cli --command "–ø—Ä–∏–≤–µ—Ç"
python -m irene.runners.cli --interactive

# Web API —Ä–µ–∂–∏–º
python -m irene.runners.webapi_runner
python -m irene.runners.webapi_runner --host 0.0.0.0 --port 8080

# VOSK —Å–µ—Ä–≤–µ—Ä
python -m irene.runners.vosk_runner

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
python -m irene.runners.settings_runner
```

---

## üîÑ **8. –ü–û–¢–û–ö–ò –û–ë–†–ê–ë–û–¢–ö–ò –î–ê–ù–ù–´–•**

### 8.1 –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∫–æ–º–∞–Ω–¥—ã

```mermaid
sequenceDiagram
    participant User as üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant Input as üì• Input Layer
    participant Core as üß† AsyncVACore
    participant Plugin as üîå Plugin
    participant Provider as üîß Provider
    participant Output as üì§ Output Layer
    
    User->>Input: –ì–æ–ª–æ—Å–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞/—Ç–µ–∫—Å—Ç
    Input->>Core: –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
    
    Note over Core: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∫–æ–º–∞–Ω–¥—ã
    
    Core->>Plugin: execute_command()
    Plugin->>Provider: –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    
    Note over Provider: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
    
    Provider-->>Plugin: –†–µ–∑—É–ª—å—Ç–∞—Ç
    Plugin-->>Core: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç
    Core->>Output: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    Output->>User: –ì–æ–ª–æ—Å/—Ç–µ–∫—Å—Ç/–≤–µ–±-–æ—Ç–≤–µ—Ç
    
    Note over Input,Output: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
```

### 8.2 –ú–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

```mermaid
graph TB
    subgraph "üì• –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–≤–æ–¥"
        Voice[üé§ –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥]
        CLI[üíª CLI –≤–≤–æ–¥]
        Web[üåê Web –≤–≤–æ–¥]
    end
    
    subgraph "üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞"
        Queue[–û—á–µ—Ä–µ–¥—å –∫–æ–º–∞–Ω–¥<br/>AsyncQueue]
        Workers[Worker Pool<br/>Concurrent –æ–±—Ä–∞–±–æ—Ç–∫–∞]
        Context[Context Manager<br/>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏]
    end
    
    subgraph "üì§ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥"
        Console[üìù –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥]
        Speech[üó£Ô∏è –ì–æ–ª–æ—Å–æ–≤–æ–π –æ—Ç–≤–µ—Ç]
        WebResp[üåê Web –æ—Ç–≤–µ—Ç]
    end
    
    Voice --> Queue
    CLI --> Queue
    Web --> Queue
    
    Queue --> Workers
    Workers --> Context
    
    Context --> Console
    Context --> Speech
    Context --> WebResp
    
    style Queue fill:#f1f8e9,stroke:#689f38,stroke-width:2px
    style Workers fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    style Context fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
```

---

## üîß **9. –ü–ê–¢–¢–ï–†–ù–´ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò**

### 9.1 Dependency Injection

**–ü—Ä–∏–Ω—Ü–∏–ø**: –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é.

```python
# –ü—Ä–∏–º–µ—Ä: –ò–Ω–∂–µ–∫—Ü–∏—è ASR –ø–ª–∞–≥–∏–Ω–∞ –≤ –º–∏–∫—Ä–æ—Ñ–æ–Ω–Ω—ã–π –≤–≤–æ–¥
class MicrophoneInput(InputSource):
    def __init__(self, asr_plugin: Optional[ASRPlugin] = None):
        self.asr_plugin = asr_plugin
        
# –í InputManager:
asr_plugin = self.component_manager.core.plugin_manager.get_plugin("universal_asr")
mic_input = MicrophoneInput(asr_plugin=asr_plugin)
```

### 9.2 Observer Pattern

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥.

### 9.3 Strategy Pattern

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –í—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –≤ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–∞—Ö.

### 9.4 Factory Pattern

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

---

## üìä **10. –ú–ï–¢–†–ò–ö–ò –ò –ú–û–ù–ò–¢–û–†–ò–ù–ì**

### 10.1 –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|---------|----------|----------|
| **Command latency** | –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥—ã | CommandProcessor |
| **Plugin availability** | –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–ª–∞–≥–∏–Ω–æ–≤ | PluginManager |
| **Component health** | –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | ComponentManager |
| **Input throughput** | –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤–≤–æ–¥–∞ | InputManager |
| **Error rate** | –ß–∞—Å—Ç–æ—Ç–∞ –æ—à–∏–±–æ–∫ | –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è |

### 10.2 Health checks

```python
# –ü—Ä–∏–º–µ—Ä health check —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
@app.get("/health")
async def health_check():
    return {
        "status": "healthy",
        "version": "13.0.0",
        "timestamp": asyncio.get_event_loop().time(),
        "components": get_component_status(),
        "deployment_profile": core.component_manager.get_deployment_profile()
    }
```

---

## üéØ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

### –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞  
‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å graceful degradation  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: Universal Plugin + Provider –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞  
‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ú–æ—â–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å TOML/ENV –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π  
‚úÖ **–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å**: CLI, –≥–æ–ª–æ—Å, –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  
‚úÖ **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ–º–æ—Å—Ç—å**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ–∂–∏–º—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤  
‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ legacy –ø–ª–∞–≥–∏–Ω–æ–≤  

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –¥–∏–∑–∞–π–Ω–∞:

üîπ **MECE**: –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏  
üîπ **Separation of Concerns**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏  
üîπ **Dependency Inversion**: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏  
üîπ **Single Responsibility**: –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç –æ–¥–Ω—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å  
üîπ **Open/Closed**: –û—Ç–∫—Ä—ã—Ç –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –∑–∞–∫—Ä—ã—Ç –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏  

–î–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–≥–æ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞, —Å–ø–æ—Å–æ–±–Ω–æ–≥–æ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ö –æ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ CLI –¥–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å –≤–µ–±-–¥–æ—Å—Ç—É–ø–æ–º. 