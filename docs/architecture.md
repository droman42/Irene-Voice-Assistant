# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ì–æ–ª–æ—Å–æ–≤–æ–≥–æ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ Irene
## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã v13.0.0

---

## üéØ **–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã**

**Irene Voice Assistant** ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ—Ñ—Ñ–ª–∞–π–Ω –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ —è–∑—ã–∫–µ Python. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∏–Ω—Ç–µ–Ω—Ç–æ–≤, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ö.

### –ö–ª—é—á–µ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **–û—Ñ—Ñ–ª–∞–π–Ω-–ø–µ—Ä–≤—ã–π –ø–æ–¥—Ö–æ–¥**: –ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥
- **–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–Ω—Ç–æ–≤**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**: Entry-points –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**: –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –≥—Ä–∞—Ü–∏–æ–∑–Ω–æ–π –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–µ–π
- **–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å**: CLI, –≥–æ–ª–æ—Å, –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –°–∏—Å—Ç–µ–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ + –ø–ª–∞–≥–∏–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

---

## ‚ö†Ô∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**

### –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è v13.0.0:
1. **–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π Pipeline**: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–Ω—Ç–æ–≤ - –Ω–µ–¥–æ—Å—Ç–∞—é—â–µ–µ –∑–≤–µ–Ω–æ –º–µ–∂–¥—É ASR –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∫–æ–º–∞–Ω–¥
2. **Voice Trigger System**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ wake word —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π OpenWakeWord –∏ microWakeWord
3. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: "Universal Plugins" –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã –≤ "Components" –∫–∞–∫ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–µ –±–ª–æ–∫–∏
4. **Intent Recognition & Orchestration**: NLU, —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–Ω—Ç–æ–≤, –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–º
5. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤**: Entry-points –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥ –∏ —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
6. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Workflow**: –û–¥–∏–Ω —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π workflow –¥–ª—è –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –ü–æ–ª–Ω—ã–π pipeline –æ–±—Ä–∞–±–æ—Ç–∫–∏ (v13.0.0):
```
Audio ‚Üí Voice Trigger ‚Üí ASR ‚Üí Text Processing ‚Üí Intent Recognition ‚Üí Intent Execution ‚Üí TTS ‚Üí Audio Output
```

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ TODO:
1. **‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ö–∞—Ä–¥–∫–æ–¥–∞** (TODO #1): –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ —Ö–∞—Ä–¥–∫–æ–¥-–∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ entry-points —Å–∏—Å—Ç–µ–º—É
2. **‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤** (TODO #2): –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤
3. **üîÑ –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ entry-points** (TODO #3): –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Å–±–æ—Ä–∫–∏ —á–µ—Ä–µ–∑ –∞–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
4. **üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è NLU –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏–Ω—Ç–µ–Ω—Ç–æ–≤** (TODO #4): –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
5. **üîÑ NLU –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤** (TODO #5): Keyword-first –ø–æ–¥—Ö–æ–¥ —Å —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–º–∏ NLU –ø–ª–∞–≥–∏–Ω–∞–º–∏

---

## ‚ùì **–ü—Ä–æ–µ–∫—Ç–Ω—ã–µ —Ü–µ–ª–∏**

**–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π:**
- –ü–æ–Ω–∏–º–∞–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ NLU
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–æ–º–∞–Ω–¥
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç wake word detection
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ—Ç—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

---

## ‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**

## üèóÔ∏è **–û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã v13.0.0**

```mermaid
graph TB
    subgraph "üöÄ –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞"
        CLI[CLI Runner<br/>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å]
        WebAPI[WebAPI Runner<br/>FastAPI —Å–µ—Ä–≤–µ—Ä]
        Vosk[Vosk Runner<br/>ASR —Å–µ—Ä–≤–µ—Ä]
        Settings[Settings Runner<br/>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏]
    end
    
    subgraph "üß† –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã"
        AsyncCore[AsyncVACore<br/>–ì–ª–∞–≤–Ω—ã–π –¥–≤–∏–∂–æ–∫ v13]
        Context[ContextManager<br/>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º]
        Commands[CommandProcessor<br/>–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥]
        Timers[AsyncTimerManager<br/>–°–∏—Å—Ç–µ–º–∞ —Ç–∞–π–º–µ—Ä–æ–≤]
    end
    
    subgraph "üîß –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã"
        CompMgr[ComponentManager<br/>–ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤]
        VoiceTrigger[VoiceTriggerComponent<br/>Wake Word Detection]
        ASRComp[ASRComponent<br/>Speech Recognition]
        TextProc[TextProcessorComponent<br/>Text Improvement]
        NLUComp[NLUComponent<br/>Intent Recognition]
        TTSComp[TTSComponent<br/>Text-to-Speech]
        AudioComp[AudioComponent<br/>Audio I/O]
        LLMComp[LLMComponent<br/>Language Models]
        WebComp[WebAPIComponent<br/>Web Interface]
    end
    
    subgraph "üéØ –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–Ω—Ç–æ–≤"
        NLUComp[NLUComponent<br/>NLU Engine]
        IntentOrch[IntentOrchestrator<br/>Central Coordinator]
        IntentReg[IntentRegistry<br/>Handler Registry]
        IntentHandlers[Intent Handlers<br/>Greetings, Timer, Weather, etc.]
        ContextMgr[ContextManager<br/>Conversation State]
    end
    
    subgraph "üéº –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è Workflow"
        VoiceWorkflow[VoiceAssistantWorkflow<br/>Complete Pipeline]
        TextWorkflow[TextAssistantWorkflow<br/>Text-only Pipeline]
        APIWorkflow[APIServiceWorkflow<br/>API-only Mode]
    end
    
    subgraph "üîó –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (TODO #1)"
        EntryPoints[Entry-Points Catalog<br/>pyproject.toml]
        DynamicLoader[DynamicLoader<br/>Configuration-driven loading]
        ProviderDiscovery[Provider Discovery<br/>Enabled-only filtering]
    end
    
    subgraph "üì•üì§ –í–≤–æ–¥/–í—ã–≤–æ–¥"
        InputMgr[InputManager]
        OutputMgr[OutputManager]
        Inputs[–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –≤–≤–æ–¥–∞]
        Outputs[–¶–µ–ª–∏ –≤—ã–≤–æ–¥–∞]
    end
    
    subgraph "üóÇÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è"
        ConfigMgr[ConfigManager<br/>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏]
        TOML[config.toml]
        ENV[–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è]
        Validation[Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—è]
    end
    
    CLI --> AsyncCore
    WebAPI --> AsyncCore
    Vosk --> AsyncCore
    Settings --> AsyncCore
    
    AsyncCore --> CompMgr
    AsyncCore --> VoiceWorkflow
    AsyncCore --> TextWorkflow
    AsyncCore --> APIWorkflow
    AsyncCore --> InputMgr
    AsyncCore --> OutputMgr
    AsyncCore --> Context
    AsyncCore --> Commands
    AsyncCore --> Timers
    
    CompMgr --> VoiceTrigger
    CompMgr --> ASRComp
    CompMgr --> TextProc
    CompMgr --> NLUComp
    CompMgr --> TTSComp
    CompMgr --> AudioComp
    CompMgr --> LLMComp
    CompMgr --> WebComp
    
    VoiceWorkflow --> IntentRec
    VoiceWorkflow --> IntentOrch
    VoiceWorkflow --> IntentReg
    VoiceWorkflow --> IntentHandlers
    VoiceWorkflow --> ContextMgr
    
    NLUComp --> IntentRec
    IntentOrch --> IntentReg
    IntentOrch --> IntentHandlers
    IntentOrch --> ContextMgr
    
    CompMgr --> DynamicLoader
    DynamicLoader --> EntryPoints
    DynamicLoader --> ProviderDiscovery
    
    ConfigMgr --> TOML
    ConfigMgr --> ENV
    ConfigMgr --> Validation
    
    style AsyncCore fill:#e1f5fe,stroke:#01579b,stroke-width:3px
    style CompMgr fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    style IntentOrch fill:#fff3e0,stroke:#ef6c00,stroke-width:3px
    style VoiceWorkflow fill:#ffcdd2,stroke:#d32f2f,stroke-width:2px
    style DynamicLoader fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px
    style ConfigMgr fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
```

---

## üéØ **1. –Ø–î–†–û –°–ò–°–¢–ï–ú–´**

### 1.1 AsyncVACore - –ì–ª–∞–≤–Ω—ã–π –¥–≤–∏–∂–æ–∫ v13.0.0

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `irene/core/engine.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–æ–º–∞–Ω–¥ —Å –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

```python
class AsyncVACore:
    """–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ v13.0.0"""
    
    def __init__(self, config: CoreConfig):
        # –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π
        self.component_manager = ComponentManager(config.components)
        
        # –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–Ω—Ç–æ–≤
        self.nlu_component = NLUComponent()
        self.intent_orchestrator = IntentOrchestrator()
        self.intent_registry = IntentRegistry()
        self.context_manager = ContextManager()
        
        # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è workflow
        self.workflow_manager = WorkflowManager()
        
        # I/O Management
        self.input_manager = InputManager(self.component_manager)
        self.output_manager = OutputManager(self.component_manager)
        
        # –£—Ç–∏–ª–∏—Ç—ã
        self.timer_manager = AsyncTimerManager()
        self.command_processor = CommandProcessor()
```

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞ v13.0.0:**
1. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** (entry-points discovery)
2. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** (voice trigger, ASR, NLU, TTS, audio)
3. **–ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤** (recognizer, orchestrator, registry, context)
4. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è workflow** (voice assistant, text assistant, API service)
5. **–ó–∞–ø—É—Å–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤** (input, output, timers)
6. **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∫–æ–º–∞–Ω–¥**

### 1.2 –ü–æ–ª–Ω—ã–π Pipeline –æ–±—Ä–∞–±–æ—Ç–∫–∏ v13.0.0

```mermaid
sequenceDiagram
    participant User as üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant Audio as üéµ Audio Input
    participant VT as üîä Voice Trigger
    participant ASR as üé§ ASR Component
    participant TP as üìù Text Processor
    participant NLU as üß† NLU Component
    participant IO as üéØ Intent Orchestrator
    participant IH as ‚ö° Intent Handler
    participant TTS as üó£Ô∏è TTS Component
    participant AO as üîà Audio Output
    
    User->>Audio: –ü—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç –∫–æ–º–∞–Ω–¥—É
    Audio->>VT: –ê—É–¥–∏–æ –ø–æ—Ç–æ–∫
    VT->>VT: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ wake word
    VT-->>ASR: Wake word detected
    
    ASR->>ASR: Speech Recognition
    ASR->>TP: Raw text
    TP->>TP: Text improvement/normalization (TODO #2)
    TP->>NLU: Clean text
    
    NLU->>NLU: Intent Recognition (TODO #4, #5)
    NLU->>IO: Intent + entities + confidence
    
    IO->>IO: Route to appropriate handler
    IO->>IH: Execute intent
    IH->>IH: Business logic execution
    IH-->>IO: Intent result
    
    IO->>TTS: Response text
    TTS->>TTS: Speech synthesis
    TTS->>AO: Audio response
    AO->>User: –ì–æ–ª–æ—Å–æ–≤–æ–π –æ—Ç–≤–µ—Ç
    
    Note over VT,AO: –ü–æ–ª–Ω—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π pipeline v13.0.0
    Note over NLU,IO: –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–Ω—Ç–æ–≤ —Å keyword donation
```

---

## üîß **2. –§–£–ù–î–ê–ú–ï–ù–¢–ê–õ–¨–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´**

### 2.1 ComponentManager - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

**–§–∏–ª–æ—Å–æ—Ñ–∏—è**: Graceful degradation - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

**–£–ª—É—á—à–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ TODO #1:**
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**: Entry-points discovery –∑–∞–º–µ–Ω—è–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–∫–ª—é—á–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- **–í–Ω–µ—à–Ω—è—è —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –°—Ç–æ—Ä–æ–Ω–Ω–∏–µ –ø–∞–∫–µ—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ entry-points

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã v13.0.0:**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å | Entry-Points |
|-----------|-------------|------------------|--------------|
| **VoiceTriggerComponent** | `openwakeword`, `tflite-runtime` | Wake word detection | 2 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ |
| **ASRComponent** | `vosk`, `whisper`, `google-cloud-speech` | –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ | 3 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ |
| **TextProcessorComponent** | `spacy`, `nltk` | –£–ª—É—á—à–µ–Ω–∏–µ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ | 4 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (TODO #2) |
| **NLUComponent** | `spacy`, `transformers` | –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–Ω—Ç–æ–≤ | 2+ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ |
| **TTSComponent** | `pyttsx3`, `silero`, `elevenlabs` | –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ | 6 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ |
| **AudioComponent** | `sounddevice`, `soundfile` | –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ | 5 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ |
| **LLMComponent** | `openai`, `anthropic` | –Ø–∑—ã–∫–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ | 3 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ |
| **WebAPIComponent** | `fastapi`, `uvicorn` | –í–µ–±-—Å–µ—Ä–≤–µ—Ä | 1 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç |

### 2.2 –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (TODO #1 - –ó–∞–≤–µ—Ä—à–µ–Ω–æ)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `irene/utils/loader.py`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã:**

```python
# –î–û: –•–∞—Ä–¥–∫–æ–¥ –∑–∞–≥—Ä—É–∑–∫–∞
self._provider_classes = {
    "elevenlabs": ElevenLabsTTSProvider,
    "console": ConsoleTTSProvider,
    # ... —è–≤–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã —Ç—Ä–µ–±—É—é—Ç—Å—è
}

# –ü–û–°–õ–ï: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ + —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
enabled_providers = [name for name, config in provider_configs.items() 
                    if config.get("enabled", False)]
self._provider_classes = dynamic_loader.discover_providers("irene.providers.tts", enabled_providers)
# –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –í–ö–õ–Æ–ß–ï–ù–ù–´–ï –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ entry-points
```

**Entry-points –∫–∞—Ç–∞–ª–æ–≥ (77 entry-points –≤ pyproject.toml):**
```toml
[project.entry-points."irene.providers.tts"]
elevenlabs = "irene.providers.tts.elevenlabs:ElevenLabsTTSProvider"
console = "irene.providers.tts.console:ConsoleTTSProvider"
silero_v4 = "irene.providers.tts.silero_v4:SileroV4TTSProvider"
# ... –∏ 74 –¥—Ä—É–≥–∏—Ö entry-points
```

### 2.3 Voice Trigger Component

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `irene/components/voice_trigger_component.py`

**–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã wake word detection:**

#### OpenWakeWord Provider
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—â–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ wake word —Å –ø—Ä–µ–¥–æ–±—É—á–µ–Ω–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: ONNX –∏ TensorFlow Lite –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: ~30-50ms –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, ~50MB –ø–∞–º—è—Ç—å

#### microWakeWord Provider
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–∞—Å—Ç–æ–º–Ω—ã–µ wake word –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –Ω–∏–∑–∫–æ–≥–æ —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è, 40 MFCC features
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: ~10-20ms –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, ~1-5MB –ø–∞–º—è—Ç—å
- **Runtime**: `tflite-runtime` (~50MB) –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ TensorFlow (~800MB)
- **INT8 –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** (TODO #14): –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ ESP32

### 2.4 Text Processor Component (TODO #2 - –ó–∞–≤–µ—Ä—à–µ–Ω–æ)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `irene/components/text_processor_component.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —ç—Ç–∞–ø–∞—Ö pipeline.

**–ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤:**

| –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|-----------|------------------|---------------|
| **ASRTextProcessor** | –¢–æ–ª—å–∫–æ NumberNormalizer | –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ ASR –≤—ã–≤–æ–¥–∞ |
| **GeneralTextProcessor** | Number + PrepareNormalizer | –û–±—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ |
| **TTSTextProcessor** | –í—Å–µ —Ç—Ä–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ | –ü–æ–ª–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è TTS |
| **NumberTextProcessor** | –¢–æ–ª—å–∫–æ —á–∏—Å–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ | –ü–µ—Ä–µ–Ω–æ—Å–∏–º–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–∏—Å–µ–ª |

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
- **60% —É—Å–∫–æ—Ä–µ–Ω–∏–µ ASR workflow** —Å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º
- **–°–µ–ª–µ–∫—Ç–∏–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**: –¢–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä—ã
- **–†–µ—Å—É—Ä—Å–Ω–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: TTS –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é

### 2.5 NLU Component (–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è TODO #4, #5)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `irene/components/nlu_component.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Ç–µ–∫—Å—Ç–∞.

**–ü–ª–∞–Ω–∏—Ä—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ keyword-first (TODO #5):**

```python
# Keyword-first –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–º–∏ NLU –ø–ª–∞–≥–∏–Ω–∞–º–∏
class NLUOrchestrator:
    def __init__(self):
        self.plugins = [
                        KeywordMatcherNLUProvider(),    # –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π: –±—ã—Å—Ç—Ä–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
            RuleBasedNLUProvider(),        # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π: regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã
            SpaCySemanticNLUProvider(),    # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π: —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ
        ]
```

**Keyword donation —Å–∏—Å—Ç–µ–º–∞ (TODO #4):**
```python
# Intent handlers –¥–æ–Ω–∏—Ä—É—é—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è NLU
class TimerIntentHandler(IntentHandler):
    def get_keywords(self) -> Dict[str, List[str]]:
        return {
            "timer.set": ["–ø–æ—Å—Ç–∞–≤—å —Ç–∞–π–º–µ—Ä", "—É—Å—Ç–∞–Ω–æ–≤–∏ –±—É–¥–∏–ª—å–Ω–∏–∫", "set timer"],
            "timer.cancel": ["–æ—Ç–º–µ–Ω–∏ —Ç–∞–π–º–µ—Ä", "—É–±–µ—Ä–∏ –±—É–¥–∏–ª—å–Ω–∏–∫", "cancel timer"]
        }
```

### 2.6 –ü—Ä–æ—Ñ–∏–ª–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è v13.0.0

```mermaid
graph LR
    subgraph "üé§ Smart Voice Assistant"
        SVA_VT[Voice Trigger ‚úì]
        SVA_ASR[ASR ‚úì]
        SVA_NLU[NLU ‚úì]
        SVA_TTS[TTS ‚úì]
        SVA_Web[Web API ‚úì]
        SVA_Audio[Audio ‚úì]
    end
    
    subgraph "üß† Text Assistant"
        TA_NLU[NLU ‚úì]
        TA_TTS[TTS ‚úì]
        TA_Web[Web API ‚úì]
        TA_Text[Text only]
    end
    
    subgraph "üåê API Server"
        API_Web[Web API ‚úì]
        API_NLU[NLU ‚úì]
        API_Text[Text processing]
    end
    
    subgraph "üîä Voice Trigger Service"
        VTS_VT[Voice Trigger ‚úì]
        VTS_Web[Web API ‚úì]
        VTS_Detect[Detection only]
    end
    
    subgraph "üíª Headless"
        H_CLI[CLI —Ç–æ–ª—å–∫–æ]
        H_Basic[–ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã]
    end
    
    style SVA_VT fill:#c8e6c9
    style SVA_ASR fill:#c8e6c9
    style SVA_NLU fill:#c8e6c9
    style SVA_TTS fill:#c8e6c9
    style TA_NLU fill:#bbdefb
    style API_Web fill:#fff3b0
    style VTS_VT fill:#f8bbd9
    style H_CLI fill:#ffcdd2
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è v13.0.0:**
```python
def get_deployment_profile(self) -> str:
    available = set(self._components.keys())
    intent_system = "nlu" in available
    
    if {"voice_trigger", "asr", "nlu", "tts", "audio_output"} <= available:
        return "Smart Voice Assistant"    # –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
    elif {"nlu", "tts"} <= available:
        return "Text Assistant"           # –¢–µ–∫—Å—Ç–æ–≤—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
    elif {"nlu", "web_api"} <= available:
        return "API Server"              # API —Å –∏–Ω—Ç–µ–Ω—Ç–∞–º–∏
    elif {"voice_trigger", "web_api"} <= available:
        return "Voice Trigger Service"   # –¢–æ–ª—å–∫–æ wake word
    elif available:
        return "Custom"
    else:
        return "Headless"
```

---

## üéØ **3. –°–ò–°–¢–ï–ú–ê –ò–ù–¢–ï–ù–¢–û–í**

### 3.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

**–ö–ª—é—á–µ–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ v13.0.0**: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ pipeline –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤.

**–ë—ã–ª–æ (v13.0.0)**: `Audio ‚Üí Voice Trigger ‚Üí ASR ‚Üí Text ‚Üí CommandProcessor`  
**–°—Ç–∞–ª–æ (v13.0.0)**: `Audio ‚Üí Voice Trigger ‚Üí ASR ‚Üí Text Processing ‚Üí Intent Recognition ‚Üí Intent Execution ‚Üí TTS ‚Üí Audio`

**–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (TODO #4, #5):**
- **Keyword donation**: –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤ –¥–æ–Ω–∏—Ä—É—é—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è NLU
- **Keyword-first NLU**: –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥
- **Morphological word forms**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä—É—Å—Å–∫–∏—Ö —Å–ª–æ–≤–æ—Ñ–æ—Ä–º

### 3.2 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤

```mermaid
graph TB
    subgraph "üß† Intent Recognition"
        Text[Clean Text Input]
        NLU[NLUComponent]
        NLUProviders[NLU Providers<br/>Keyword, Rule-based, spaCy]
    end
    
    subgraph "üéØ Intent Processing"
        Intent[Intent Object<br/>name + entities + confidence]
        IO[IntentOrchestrator]
        Registry[IntentRegistry]
        Context[ContextManager]
    end
    
    subgraph "‚ö° Intent Handlers"
        Greet[GreetingsHandler]
        Timer[TimerHandler]
        Weather[WeatherHandler]
        Conv[ConversationHandler]
        System[SystemHandler]
        DateTime[DateTimeHandler]
    end
    
    subgraph "üìä Context & State"
        ConvContext[Conversation Context]
        UserProfile[User Profile]
        Session[Session State]
        History[Conversation History]
    end
    
    subgraph "üîë Keyword Donation (TODO #4)"
        KeywordDonation[Handler ‚Üí NLU<br/>Keyword Contribution]
        MorphGen[Russian Morphology<br/>Word Forms Generation]
    end
    
    Text --> IR
    IR --> NLUProviders
    IR --> Intent
    
    Intent --> IO
    IO --> Registry
    IO --> Context
    
    Registry --> Greet
    Registry --> Timer
    Registry --> Weather
    Registry --> Conv
    Registry --> System
    Registry --> DateTime
    
    Context --> ConvContext
    Context --> UserProfile
    Context --> Session
    Context --> History
    
    Greet --> KeywordDonation
    Timer --> KeywordDonation
    Weather --> KeywordDonation
    KeywordDonation --> MorphGen
    MorphGen --> NLUProviders
    
    style Intent fill:#ffecb3,stroke:#ff8f00,stroke-width:2px
    style IO fill:#fff3e0,stroke:#ef6c00,stroke-width:3px
    style Context fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style KeywordDonation fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
```

### 3.3 Intent Recognition & Processing

#### NLUComponent - NLU Engine
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `irene/components/nlu_component.py`

```python
class NLUComponent:
    """Natural Language Understanding –∫–æ–º–ø–æ–Ω–µ–Ω—Ç"""
    
    async def recognize(self, text: str, context: ConversationContext) -> Intent:
        """
        –†–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Ç–µ–∫—Å—Ç–∞
        
        Returns:
            Intent: –û–±—ä–µ–∫—Ç —Å –Ω–∞–º–µ—Ä–µ–Ω–∏–µ–º, —Å—É—â–Ω–æ—Å—Ç—è–º–∏ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é
        """
        # Primary NLU provider (keyword-first –≤ TODO #5)
        provider = self.providers[self.default_provider]
        intent = await provider.recognize(text, context)
        
        if intent.confidence >= self.confidence_threshold:
            return intent
        
        # Fallback to conversation intent
        return Intent(
            name="conversation.chat",
            entities={"text": text},
            confidence=0.5,
            raw_text=text
        )
```

#### IntentOrchestrator - Central Coordinator
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `irene/intents/orchestrator.py`

```python
class IntentOrchestrator:
    """–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –∏–Ω—Ç–µ–Ω—Ç–æ–≤"""
    
    async def execute_intent(self, intent: Intent, context: ConversationContext) -> IntentResult:
        """–í—ã–ø–æ–ª–Ω—è–µ—Ç –∏–Ω—Ç–µ–Ω—Ç —á–µ—Ä–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫"""
        
        # Get appropriate handler
        handler = await self.registry.get_handler(intent.name)
        
        # Execute intent
        result = await handler.execute(intent, context)
        
        # Update conversation context
        await self.context_manager.add_user_turn(intent, context)
        await self.context_manager.add_assistant_turn(result, context)
        
        return result
```

#### Intent Handlers —Å –ø–ª–∞–Ω–∏—Ä—É–µ–º–æ–π keyword donation (TODO #4)
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `irene/intents/handlers/`

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:**
- **GreetingsHandler**: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –∏ –ø—Ä–æ—â–∞–Ω–∏—è
- **TimerHandler**: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞–º–∏
- **WeatherHandler**: –ü–æ–≥–æ–¥–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- **DateTimeHandler**: –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –∏ –¥–∞—Ç–∞
- **SystemHandler**: –°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ –ø–æ–º–æ—â—å
- **ConversationHandler**: –°–≤–æ–±–æ–¥–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ LLM

**–ü–ª–∞–Ω–∏—Ä—É–µ–º–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ (TODO #4):**
```python
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–æ–Ω–∏—Ä—É—é—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è NLU
class WeatherIntentHandler(IntentHandler):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–≥–æ–¥–Ω—ã—Ö –∏–Ω—Ç–µ–Ω—Ç–æ–≤"""
    
    def get_keywords(self) -> Dict[str, List[str]]:
        """–î–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è NLU (TODO #4)"""
        return {
            "weather.get_current": ["–ø–æ–≥–æ–¥–∞", "—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞", "weather"],
            "weather.get_forecast": ["–ø—Ä–æ–≥–Ω–æ–∑", "forecast", "–∑–∞–≤—Ç—Ä–∞"]
        }
    
    async def execute(self, intent: Intent, context: ConversationContext) -> IntentResult:
        location = intent.entities.get("location")
        
        if not location:
            location = context.user_profile.get("default_location")
            
        if not location:
            return IntentResult(
                text="–î–ª—è –∫–∞–∫–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –ø–æ–≥–æ–¥—É?",
                should_speak=True
            )
            
        weather = await self.weather_service.get_current_weather(location)
        response = f"–í –≥–æ—Ä–æ–¥–µ {location} —Å–µ–π—á–∞—Å {weather.description}, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ {weather.temperature}¬∞C"
        
        return IntentResult(
            text=response,
            should_speak=True,
            metadata={"weather_data": weather.to_dict()}
        )
```

### 3.4 Context Management

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `irene/intents/context.py`

**–§—É–Ω–∫—Ü–∏–∏ ContextManager:**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ—Ñ–∏–ª–∏ –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è —Å–≤—è–∑—å –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

```python
class ContextManager:
    """–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º —Ä–∞–∑–≥–æ–≤–æ—Ä–∞"""
    
    async def get_context(self, session_id: str) -> ConversationContext:
        """–ü–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–µ—Å—Å–∏–∏"""
        
    async def add_user_turn(self, intent: Intent, context: ConversationContext):
        """–î–æ–±–∞–≤–∏—Ç—å —Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∏—Å—Ç–æ—Ä–∏—é"""
        
    async def add_assistant_turn(self, result: IntentResult, context: ConversationContext):
        """–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –≤ –∏—Å—Ç–æ—Ä–∏—é"""
```

---

## üéº **4. –û–†–ö–ï–°–¢–†–ê–¶–ò–Ø WORKFLOW**

### 4.1 VoiceAssistantWorkflow - –ü–æ–ª–Ω—ã–π Pipeline

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `irene/workflows/voice_assistant.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ï–¥–∏–Ω—ã–π workflow, –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É—é—â–∏–π –ø–æ–ª–Ω—ã–π pipeline –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ —Å —Å–∏—Å—Ç–µ–º–æ–π –∏–Ω—Ç–µ–Ω—Ç–æ–≤.

```python
class VoiceAssistantWorkflow(Workflow):
    """Complete voice assistant workflow with intent system"""
    
    async def process_audio_stream(self, audio_stream: AsyncIterator[AudioData], context: RequestContext):
        """–ì–õ–ê–í–ù–´–ô WORKFLOW - –ø–æ–ª–Ω—ã–π pipeline –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ v13.0.0"""
        
        # Get conversation context
        session_id = context.session_id or "default"
        conversation_context = await self.context_manager.get_context(session_id)
        
        async for audio_data in audio_stream:
            # 1. Voice Trigger Detection (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
            if self.voice_trigger and not context.skip_wake_word:
                wake_result = await self.voice_trigger.detect(audio_data)
                if not wake_result.detected:
                    continue  # Keep listening for wake word
                    
                self.logger.info(f"Wake word '{wake_result.word}' detected")
                
            # 2. Speech Recognition (ASR)
            raw_text = await self.asr.transcribe(audio_data)
            self.logger.info(f"ASR result: {raw_text}")
            
            # 3. Text Improvement (TODO #2 - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã)
            improved_text = raw_text
            if self.text_processor:
                improved_text = await self.text_processor.improve(raw_text, conversation_context)
                self.logger.info(f"Improved text: {improved_text}")
                
            # 4. Intent Recognition (NLU) - —Å –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã–º–∏ —É–ª—É—á—à–µ–Ω–∏—è–º–∏ TODO #4, #5
            intent = await self.nlu.recognize(improved_text, conversation_context)
            self.logger.info(f"Intent recognized: {intent.name} (confidence: {intent.confidence})")
            
            # 5. Intent Execution - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø
            intent_result = await self.intent_orchestrator.execute_intent(intent, conversation_context)
            
            # 6. Response Generation & TTS
            if intent_result.should_speak and self.tts:
                audio_response = await self.tts.synthesize(intent_result.text)
                
                # 7. Audio Output
                if self.audio_output and audio_response:
                    await self.audio_output.play(audio_response)
                    
            # 8. Additional Actions
            for action in intent_result.actions:
                await self._execute_action(action, conversation_context)
```

### 4.2 –í–∞—Ä–∏–∞—Ü–∏–∏ Workflow

#### TextAssistantWorkflow
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: Workflow –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ (–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç voice trigger –∏ ASR)

#### APIServiceWorkflow  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: Workflow –¥–ª—è API-—Ä–µ–∂–∏–º–∞ (—Ç–æ–ª—å–∫–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–Ω—Ç–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ HTTP)

```mermaid
graph LR
    subgraph "üé§ Voice Assistant Workflow"
        VW_Audio[Audio Input]
        VW_VT[Voice Trigger]
        VW_ASR[ASR]
        VW_TP[Text Processor<br/>TODO #2 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è]
        VW_NLU[NLU<br/>TODO #4,#5 —É–ª—É—á—à–µ–Ω–∏—è]
        VW_IO[Intent Orchestrator]
        VW_TTS[TTS]
        VW_Audio_Out[Audio Output]
    end
    
    subgraph "üìù Text Assistant Workflow"
        TW_Text[Text Input]
        TW_TP[Text Processor]
        TW_NLU[NLU]
        TW_IO[Intent Orchestrator]
        TW_TTS[TTS]
        TW_Audio_Out[Audio Output]
    end
    
    subgraph "üåê API Service Workflow"
        AW_HTTP[HTTP Request]
        AW_TP[Text Processor]
        AW_NLU[NLU]
        AW_IO[Intent Orchestrator]
        AW_JSON[JSON Response]
    end
    
    VW_Audio --> VW_VT --> VW_ASR --> VW_TP --> VW_NLU --> VW_IO --> VW_TTS --> VW_Audio_Out
    TW_Text --> TW_TP --> TW_NLU --> TW_IO --> TW_TTS --> TW_Audio_Out
    AW_HTTP --> AW_TP --> AW_NLU --> AW_IO --> AW_JSON
    
    style VW_IO fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    style TW_IO fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    style AW_IO fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    style VW_TP fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    style VW_NLU fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
```

---

## üì•üì§ **5. –°–ò–°–¢–ï–ú–ê –í–í–û–î–ê/–í–´–í–û–î–ê**

### 5.1 –ú–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ v13.0.0

```mermaid
graph LR
    subgraph "üì• Input Sources"
        Voice_Input[Voice Input<br/>üé§ Microphone + Voice Trigger]
        CLI_Input[CLI Input<br/>üíª Text commands]
        Web_Input[Web Input<br/>üåê WebSocket/REST]
        File_Input[File Input<br/>üìÅ Audio files]
        ESP32_Input[ESP32 Input<br/>üîå Binary WebSocket TODO 10]
    end
    
    subgraph "üîÑ InputManager"
        IM[Input Manager<br/>Coordinate sources]
        Queue[Command Queue<br/>AsyncQueue]
        Discovery[Auto-discovery<br/>Available sources]
    end
    
    subgraph "üéº Workflow Selection"
        WS[Workflow Selector]
        VoiceWF[VoiceAssistantWorkflow]
        TextWF[TextAssistantWorkflow]
        APIWF[APIServiceWorkflow]
    end
    
    subgraph "üß† Processing"
        Core[AsyncVACore]
        IntentSystem[Intent System<br/>with planned improvements]
    end
    
    Voice_Input --> IM
    CLI_Input --> IM
    Web_Input --> IM
    File_Input --> IM
    ESP32_Input --> IM
    
    IM --> Queue
    IM --> Discovery
    
    Queue --> WS
    WS --> VoiceWF
    WS --> TextWF
    WS --> APIWF
    
    VoiceWF --> Core
    TextWF --> Core
    APIWF --> Core
    
    Core --> IntentSystem
    
    style IM fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    style WS fill:#ffcdd2,stroke:#d32f2f,stroke-width:2px
    style IntentSystem fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    style ESP32_Input fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
```

### 5.2 –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞ v13.0.0

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ü–µ–ª–µ–π –≤—ã–≤–æ–¥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ IntentResult
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞**: –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ conversation context
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥**: –û–¥–∏–Ω –æ—Ç–≤–µ—Ç –º–æ–∂–µ—Ç –∏–¥—Ç–∏ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞–Ω–∞–ª–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **Graceful degradation**: –†–∞–±–æ—Ç–∞ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–∞–Ω–∞–ª–æ–≤

---

## üèóÔ∏è **6. –°–ò–°–¢–ï–ú–ê –°–ë–û–†–ö–ò –ò –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø**

### 6.1 Entry-Points Based Build System (TODO #3)

**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (—Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–µ–Ω —á–µ—Ä–µ–∑ TODO #1)

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã**: –ê–Ω–∞–ª–∏–∑ entry-points –∫–∞—Ç–∞–ª–æ–≥–∞ + TOML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —Å–±–æ—Ä–æ–∫.

```mermaid
graph TB
    subgraph "üìã Entry-Points Catalog"
        EP[pyproject.toml<br/>77 entry-points]
        ProviderCatalog[Catalog of all providers<br/>Audio, TTS, ASR, LLM, etc.]
    end
    
    subgraph "‚öôÔ∏è Configuration"
        Config[config.toml<br/>Enabled providers]
        BuildProfile[Build Profile<br/>minimal/full/docker]
    end
    
    subgraph "üîç Build Analyzer"
        Analyzer[Build Analyzer<br/>Config + Entry-Points ‚Üí Modules]
        ModuleMapper[Module Mapper<br/>Provider ‚Üí Python Module]
        DependencyResolver[Dependency Resolver<br/>Inter-module dependencies]
    end
    
    subgraph "üì¶ Build Outputs"
        MinimalBuild[Minimal Build<br/>Single provider only]
        FullBuild[Full Build<br/>All providers]
        DockerBuild[Docker Build<br/>Container optimized]
        ServiceBuild[Service Build<br/>Targeted deployment]
    end
    
    EP --> Analyzer
    Config --> Analyzer
    BuildProfile --> Analyzer
    
    Analyzer --> ModuleMapper
    Analyzer --> DependencyResolver
    
    ModuleMapper --> MinimalBuild
    ModuleMapper --> FullBuild
    ModuleMapper --> DockerBuild
    ModuleMapper --> ServiceBuild
    
    style Analyzer fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    style MinimalBuild fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    style DockerBuild fill:#e1f5fe,stroke:#01579b,stroke-width:2px
```

**–ü—Ä–∏–º–µ—Ä –∞–Ω–∞–ª–∏–∑–∞ —Å–±–æ—Ä–∫–∏:**
```python
# config-minimal.toml –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è build system
[components]
enabled = ["audio"]  # –¢–æ–ª—å–∫–æ audio –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

[providers.audio]
enabled = ["console"]  # –¢–æ–ª—å–∫–æ console audio provider

# Result: Build includes only:
# - irene.core.*
# - irene.components.audio_component  
# - irene.providers.audio.console
# All other providers/components excluded
```

### 6.2 –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**config.toml v13.0.0 —Å TODO —É–ª—É—á—à–µ–Ω–∏—è–º–∏:**
```toml
[core]
name = "Irene"
version = "14.0.0"
debug = false
log_level = "INFO"
language = "ru-RU"

# –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π (TODO #1)
[components]
voice_trigger = true
asr = true
text_processor = true    # TODO #2: –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã
nlu = true              # TODO #4,#5: Keyword-first —É–ª—É—á—à–µ–Ω–∏—è
tts = true
audio_output = true
llm = true
web_api = false

# –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (TODO #1)
auto_discover = true
discovery_paths = ["irene.components", "custom.components"]

# Voice Trigger Configuration
[components.voice_trigger]
enabled = true
default_provider = "microwakeword"
wake_words = ["irene", "jarvis"]
threshold = 0.8

[components.voice_trigger.providers.microwakeword]
model_path = "./models/wake_word/irene_model.tflite"
feature_buffer_size = 49
detection_window_size = 3
num_mfcc_features = 40

# Text Processing —Å –Ω–æ–≤—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ (TODO #2)
[components.text_processor]
provider = "general_text_processor"  # –ù–æ–≤—ã–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
enabled_providers = ["asr_text_processor", "general_text_processor"]
stage_routing = true

# NLU Configuration —Å –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã–º–∏ —É–ª—É—á—à–µ–Ω–∏—è–º–∏ (TODO #4, #5)
[components.nlu]
provider = "keyword_matcher"  # TODO #5
fallback_provider = "spacy"
confidence_threshold = 0.7
keyword_donation_enabled = true  # TODO #4

[components.nlu.keyword_matcher]
russian_morphology = true  # TODO #5
morphology_cache = true

# –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–Ω—Ç–æ–≤
[intents]
enabled = true
confidence_threshold = 0.7
fallback_handler = "conversation"
max_history_turns = 10
session_timeout = 1800
keyword_donation = true  # TODO #4

# Intent handlers
[intents.handlers]
greetings = true
timer = true
weather = true
datetime = true
system = true
conversation = true

# Workflow Configuration
[workflows]
default = "voice_assistant"
voice_assistant = true
text_assistant = true
api_service = true

[workflows.voice_assistant]
skip_wake_word = false
require_wake_word = true
continuous_listening = true

# Build Configuration (TODO #3)
[build]
profile = "full"  # full | minimal | api-only | voice-only
include_only_enabled = true
exclude_disabled_dependencies = true
lazy_imports = true

# Provider-specific enablement for selective builds (TODO #1, #3)
[providers.audio]
enabled = ["sounddevice", "console"]
default = "sounddevice"
fallback_providers = []  # No fallbacks approach

[providers.tts]
enabled = ["elevenlabs", "console"]
default = "elevenlabs"
fallback_providers = []

# Legacy plugin compatibility
[plugins]
load_builtin = true
external_paths = ["./plugins", "./custom_plugins"]

[security]
enable_auth = false
api_keys = []

[assets]
models_root = "./models"
cache_root = "./cache"
data_root = "./data"
```

### 6.3 –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è v13.0.0

```bash
# Core System
export IRENE_CORE__VERSION=14.0.0
export IRENE_CORE__LOG_LEVEL=INFO

# Dynamic Loading (TODO #1)
export IRENE_COMPONENTS__AUTO_DISCOVER=true
export IRENE_PROVIDERS__FILTER_ENABLED_ONLY=true

# Voice Trigger
export IRENE_COMPONENTS__VOICE_TRIGGER__ENABLED=true
export IRENE_COMPONENTS__VOICE_TRIGGER__DEFAULT_PROVIDER=microwakeword
export IRENE_COMPONENTS__VOICE_TRIGGER__THRESHOLD=0.8

# Intent System —Å –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã–º–∏ —É–ª—É—á—à–µ–Ω–∏—è–º–∏
export IRENE_INTENTS__ENABLED=true
export IRENE_INTENTS__CONFIDENCE_THRESHOLD=0.7
export IRENE_INTENTS__KEYWORD_DONATION=true  # TODO #4

# NLU Configuration (TODO #4, #5)
export IRENE_COMPONENTS__NLU__PROVIDER=keyword_matcher  # TODO #5
export IRENE_COMPONENTS__NLU__MODEL_PATH=/opt/irene/models/nlu/
export IRENE_COMPONENTS__NLU__KEYWORD_DONATION_ENABLED=true  # TODO #4

# Text Processing (TODO #2)
export IRENE_COMPONENTS__TEXT_PROCESSOR__PROVIDER=general_text_processor
export IRENE_COMPONENTS__TEXT_PROCESSOR__STAGE_ROUTING=true

# Build System (TODO #3)
export IRENE_BUILD__PROFILE=minimal
export IRENE_BUILD__INCLUDE_ONLY_ENABLED=true

# Asset Management
export IRENE_ASSETS__MODELS_ROOT=/opt/irene/models
export IRENE_ASSETS__CACHE_ROOT=/opt/irene/cache
```

---

## üåê **7. WEB API –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø v13.0.0**

### 7.1 –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

```mermaid
graph LR
    subgraph "üåê Core API Endpoints"
        Root["/  <br/>üè† Main page"]
        Status["/status<br/>üìä System status"]
        Health["/health<br/>üíö Health check"]
        Components["/components<br/>‚öôÔ∏è Component info"]
    end
    
    subgraph "üéØ Intent System API"
        IntentRecognize["/intents/recognize<br/>üß† Recognize intent"]
        IntentExecute["/intents/execute<br/>‚ö° Execute intent"]
        IntentHandlers["/intents/handlers<br/>üìã List handlers"]
        IntentContext["/intents/context/*<br/>üí≠ Context management"]
        KeywordAPI["/intents/keywords<br/>üîë Keyword donation (TODO #4)"]
    end
    
    subgraph "üîä Voice Trigger API"
        VTStatus["/voice_trigger/status<br/>üìä VT status"]
        VTConfigure["/voice_trigger/configure<br/>‚öôÔ∏è Configure"]
        VTProviders["/voice_trigger/providers<br/>üîß List providers"]
        VTSwitch["/voice_trigger/switch<br/>üîÑ Switch provider"]
    end
    
    subgraph "üîå Component APIs"
        TTS_API["/tts/*<br/>üó£Ô∏è Text-to-Speech"]
        ASR_API["/asr/*<br/>üé§ Speech Recognition"]
        LLM_API["/llm/*<br/>üß† Language Models"]
        Audio_API["/audio/*<br/>üîä Audio Processing"]
        NLU_API["/nlu/*<br/>üéØ Intent Recognition"]
        TextProc_API["/text_processor/*<br/>üìù TODO #2 stages"]
    end
    
    subgraph "üéº Workflow API"
        ProcessText["/workflow/process_text<br/>üìù Text processing"]
        ProcessAudio["/workflow/process_audio<br/>üé§ Audio processing"]
        WorkflowStatus["/workflow/status<br/>üìä Workflow status"]
        BuildAPI["/build/analyze<br/>üèóÔ∏è TODO #3 build analysis"]
    end
    
    subgraph "üîÑ Real-time"
        WebSocket["/ws<br/>‚ö° WebSocket"]
        BinaryWS["/ws/audio/binary<br/>üîå TODO #10 ESP32 optimization"]
        Docs["/docs<br/>üìö OpenAPI docs"]
    end
    
    style IntentRecognize fill:#fff3e0
    style IntentExecute fill:#fff3e0
    style VTStatus fill:#e8f5e8
    style ProcessText fill:#ffcdd2
    style KeywordAPI fill:#f3e5f5
    style TextProc_API fill:#e8f5e8
    style BuildAPI fill:#e1f5fe
    style BinaryWS fill:#f3e5f5
    style WebSocket fill:#e1f5fe
```

### 7.2 –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤ —Å –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã–º–∏ —É–ª—É—á—à–µ–Ω–∏—è–º–∏

```python
# Intent System API —Å TODO —É–ª—É—á—à–µ–Ω–∏—è–º–∏
@app.post("/intents/recognize")
async def recognize_intent(text: str, session_id: str = "default"):
    """–†–∞—Å–ø–æ–∑–Ω–∞—Ç—å –∏–Ω—Ç–µ–Ω—Ç –∏–∑ —Ç–µ–∫—Å—Ç–∞ (keyword-first –≤ TODO #5)"""
    context = await context_manager.get_context(session_id)
    intent = await nlu.recognize(text, context)
    return {
        "intent": intent.name,
        "entities": intent.entities,
        "confidence": intent.confidence,
        "recognition_method": intent.metadata.get("method", "unknown")  # keyword/rule/semantic
    }

@app.get("/intents/keywords")  # TODO #4: Keyword donation API
async def get_donated_keywords():
    """–ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, –¥–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤"""
    handlers = intent_registry.get_all_handlers()
    donated_keywords = {}
    
    for handler_name, handler in handlers.items():
        if hasattr(handler, 'get_keywords'):
            donated_keywords[handler_name] = await handler.get_keywords()
    
    return {
        "donated_keywords": donated_keywords,
        "total_handlers": len(handlers),
        "donation_enabled": len(donated_keywords)
    }

@app.post("/intents/keywords/regenerate")  # TODO #5: Russian morphology
async def regenerate_morphological_forms():
    """–†–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä—É—Å—Å–∫–∏–µ —Å–ª–æ–≤–æ—Ñ–æ—Ä–º—ã –¥–ª—è –¥–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤"""
    russian_morph = RussianMorphology()
    regenerated = await russian_morph.regenerate_all_forms()
    
    return {
        "status": "regenerated",
        "base_keywords": regenerated.get("base_count", 0),
        "generated_forms": regenerated.get("forms_count", 0),
        "cache_updated": regenerated.get("cache_status", False)
    }

# Text Processing API —Å –Ω–æ–≤—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ (TODO #2)
@app.post("/text_processor/process")
async def process_text_stage_specific(text: str, stage: str = "general"):
    """–û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä"""
    stage_processors = {
        "asr": "asr_text_processor",
        "general": "general_text_processor", 
        "tts": "tts_text_processor",
        "numbers": "number_text_processor"
    }
    
    processor_name = stage_processors.get(stage, "general_text_processor")
    processor = text_processor_component.get_provider(processor_name)
    
    result = await processor.process(text)
    
    return {
        "original_text": text,
        "processed_text": result,
        "processor_used": processor_name,
        "stage": stage
    }

# Build System API (TODO #3)
@app.post("/build/analyze")
async def analyze_build_requirements(config_file: str = "config.toml"):
    """–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Å–±–æ—Ä–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"""
    build_analyzer = BuildAnalyzer()
    analysis = await build_analyzer.analyze_config(config_file)
    
    return {
        "enabled_components": analysis.get("components", []),
        "enabled_providers": analysis.get("providers", {}),
        "required_modules": analysis.get("modules", []),
        "excluded_modules": analysis.get("excluded", []),
        "estimated_size_reduction": analysis.get("size_reduction_percent", 0),
        "build_profile": analysis.get("profile", "unknown")
    }

# ESP32 Binary WebSocket (TODO #10)
@app.websocket("/ws/audio/binary")
async def binary_audio_stream(websocket: WebSocket):
    """–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –±–∏–Ω–∞—Ä–Ω–∞—è –ø–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –∞—É–¥–∏–æ –¥–ª—è ESP32"""
    await websocket.accept()
    
    # Session setup
    config = await websocket.receive_json()
    
    try:
        while True:
            # Receive raw PCM binary data (no base64 overhead)
            audio_data = await websocket.receive_bytes()
            
            # Direct ASR processing
            text = await asr.transcribe_audio(audio_data)
            
            # Send optimized response
            if text.strip():
                await websocket.send_json({
                    "type": "transcription",
                    "text": text,
                    "timestamp": time.time(),
                    "binary_optimized": True
                })
```

---

## üöÄ **8. –†–ï–ñ–ò–ú–´ –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø v13.0.0**

### 8.1 –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞

```mermaid
graph TB
    subgraph "üñ•Ô∏è CLI –†–µ–∂–∏–º"
        CLI_Runner[CLIRunner]
        CLI_Interactive[–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º<br/>—Å –∏–Ω—Ç–µ–Ω—Ç–∞–º–∏]
        CLI_Single[–û–¥–∏–Ω–æ—á–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞<br/>—á–µ—Ä–µ–∑ NLU]
        CLI_Context[–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏]
        CLI_Keyword[Keyword donation testing<br/>TODO #4]
    end
    
    subgraph "üåê Web API –†–µ–∂–∏–º"
        Web_Runner[WebAPIRunner]
        Web_FastAPI[FastAPI server<br/>—Å intent endpoints]
        Web_WebSocket[WebSocket server<br/>real-time intents]
        Web_Binary[Binary WebSocket<br/>TODO #10]
        Web_Docs[Auto docs<br/>–¥–ª—è intent API]
    end
    
    subgraph "üé§ Voice Assistant –†–µ–∂–∏–º"
        Voice_Runner[VoiceAssistantRunner]
        Voice_Pipeline[Full pipeline<br/>Voice Trigger ‚Üí Intent]
        Voice_Context[Contextual conversations]
        Voice_Continuous[Continuous listening]
        Voice_Keyword[Keyword-first NLU<br/>TODO #5]
    end
    
    subgraph "üîä Voice Trigger –†–µ–∂–∏–º"
        VT_Runner[VoiceTriggerRunner]
        VT_Server[Wake word detection<br/>service]
        VT_Remote[Remote detection<br/>API]
        VT_Callback[Webhook callbacks]
        VT_INT8[INT8 optimization<br/>TODO #14 –∑–∞–≤–µ—Ä—à–µ–Ω–æ]
    end
    
    subgraph "‚öôÔ∏è Settings –†–µ–∂–∏–º"
        Settings_Runner[SettingsManagerRunner]
        Settings_GUI[GUI –¥–ª—è intent config]
        Settings_Train[NLU model training]
        Settings_Context[Context management]
        Settings_Build[Build analysis<br/>TODO #3]
    end
    
    CLI_Runner --> CLI_Interactive
    CLI_Runner --> CLI_Single
    CLI_Runner --> CLI_Context
    CLI_Runner --> CLI_Keyword
    
    Web_Runner --> Web_FastAPI
    Web_Runner --> Web_WebSocket
    Web_Runner --> Web_Binary
    Web_Runner --> Web_Docs
    
    Voice_Runner --> Voice_Pipeline
    Voice_Runner --> Voice_Context
    Voice_Runner --> Voice_Continuous
    Voice_Runner --> Voice_Keyword
    
    VT_Runner --> VT_Server
    VT_Runner --> VT_Remote
    VT_Runner --> VT_Callback
    VT_Runner --> VT_INT8
    
    Settings_Runner --> Settings_GUI
    Settings_Runner --> Settings_Train
    Settings_Runner --> Settings_Context
    Settings_Runner --> Settings_Build
    
    style Voice_Runner fill:#e8f5e8,stroke:#4caf50,stroke-width:3px
    style CLI_Runner fill:#e3f2fd
    style Web_Runner fill:#fff3e0
    style VT_Runner fill:#ffcdd2
    style Settings_Runner fill:#fce4ec
    style Voice_Keyword fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style Web_Binary fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style Settings_Build fill:#e1f5fe,stroke:#01579b,stroke-width:2px
```

### 8.2 –ö–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞ v13.0.0

```bash
# Voice Assistant —Ä–µ–∂–∏–º —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏
python -m irene.runners.voice_assistant
python -m irene.runners.voice_assistant --continuous --wake-word irene --keyword-first  # TODO #5

# CLI —Ä–µ–∂–∏–º —Å –∏–Ω—Ç–µ–Ω—Ç–∞–º–∏ –∏ keyword donation testing
python -m irene.runners.cli
python -m irene.runners.cli --command "–ø—Ä–∏–≤–µ—Ç –∏—Ä—ç–Ω"
python -m irene.runners.cli --interactive --context-enabled
python -m irene.runners.cli --test-keyword-donation  # TODO #4

# Web API —Ä–µ–∂–∏–º —Å –Ω–æ–≤—ã–º–∏ endpoints
python -m irene.runners.webapi_runner
python -m irene.runners.webapi_runner --host 0.0.0.0 --port 8080
python -m irene.runners.webapi_runner --enable-binary-ws  # TODO #10

# Voice Trigger —Å–µ—Ä–≤–∏—Å —Å INT8 optimization
python -m irene.runners.voice_trigger
python -m irene.runners.voice_trigger --provider microwakeword --threshold 0.8 --int8-optimized

# Build analysis –∏ management
python -m irene.runners.settings_runner
python -m irene.runners.settings_runner --analyze-build --config config-minimal.toml  # TODO #3
python -m irene.runners.settings_runner --train-nlu --keyword-donation  # TODO #4
```

---

## üîÑ **9. –ü–û–¢–û–ö–ò –û–ë–†–ê–ë–û–¢–ö–ò –î–ê–ù–ù–´–• v13.0.0**

### 9.1 –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∫–æ–º–∞–Ω–¥—ã —Å –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã–º–∏ —É–ª—É—á—à–µ–Ω–∏—è–º–∏

```mermaid
sequenceDiagram
    participant User as üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant VT as üîä Voice Trigger (INT8)
    participant ASR as üé§ ASR Component
    participant TP as üìù Text Processor (TODO #2)
    participant NLU as üß† NLU (TODO #4,#5)
    participant IO as üéØ Intent Orchestrator
    participant IH as ‚ö° Intent Handler
    participant CM as üí≠ Context Manager
    participant TTS as üó£Ô∏è TTS Component
    participant AO as üîà Audio Output
    
    User->>VT: "–ò—Ä—ç–Ω, –∫–∞–∫–∞—è –ø–æ–≥–æ–¥–∞ –≤ –ú–æ—Å–∫–≤–µ?"
    VT->>VT: INT8 wake word detection (TODO #14)
    VT-->>ASR: Wake word detected, start ASR
    
    ASR->>ASR: Speech recognition
    ASR->>TP: "–∫–∞–∫–∞—è –ø–æ–≥–æ–¥–∞ –≤ –º–æ—Å–∫–≤–µ"
    
    TP->>TP: Stage-specific processing (TODO #2)
    Note over TP: ASRTextProcessor ‚Üí fast number normalization
    TP->>NLU: "–ö–∞–∫–∞—è –ø–æ–≥–æ–¥–∞ –≤ –ú–æ—Å–∫–≤–µ?"
    
    NLU->>NLU: Keyword-first recognition (TODO #5)
    Note over NLU: 1. Keyword matcher (fast)<br/>2. Rule-based fallback<br/>3. Semantic fallback
    NLU->>IO: Intent{name: "weather.get_current", entities: {"location": "–ú–æ—Å–∫–≤–∞"}}
    
    IO->>CM: Get conversation context
    CM-->>IO: Current session context
    
    IO->>IH: Execute weather intent
    Note over IH: Handler uses donated keywords<br/>for better recognition (TODO #4)
    IH->>IH: Call weather service API
    IH-->>IO: IntentResult{text: "–í –ú–æ—Å–∫–≤–µ —Å–µ–π—á–∞—Å +5¬∞C, –æ–±–ª–∞—á–Ω–æ"}
    
    IO->>CM: Update context with intent & result
    IO->>TTS: "–í –ú–æ—Å–∫–≤–µ —Å–µ–π—á–∞—Å +5¬∞C, –æ–±–ª–∞—á–Ω–æ"
    
    TTS->>TTS: Speech synthesis
    TTS->>AO: Audio data
    AO->>User: üîä "–í –ú–æ—Å–∫–≤–µ —Å–µ–π—á–∞—Å +5¬∞C, –æ–±–ª–∞—á–Ω–æ"
    
    Note over VT,AO: –ü–æ–ª–Ω—ã–π pipeline v13.0.0 —Å TODO —É–ª—É—á—à–µ–Ω–∏—è–º–∏
    Note over NLU,CM: Keyword donation + keyword-first NLU
```

### 9.2 –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã —Å keyword donation

```mermaid
sequenceDiagram
    participant User as üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant System as ü§ñ –°–∏—Å—Ç–µ–º–∞
    participant Context as üí≠ Context Manager
    participant Keywords as üîë Keyword Donation (TODO #4)
    
    User->>System: "–ö–∞–∫–∞—è –ø–æ–≥–æ–¥–∞ –≤ –ú–æ—Å–∫–≤–µ?"
    System->>Keywords: Handler donates keywords: ["–ø–æ–≥–æ–¥–∞", "—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞"]
    Keywords->>System: Enhanced NLU recognition
    System->>Context: Store intent: weather.get_current + location: "–ú–æ—Å–∫–≤–∞"
    System-->>User: "–í –ú–æ—Å–∫–≤–µ —Å–µ–π—á–∞—Å +5¬∞C, –æ–±–ª–∞—á–Ω–æ"
    
    User->>System: "–ê –∑–∞–≤—Ç—Ä–∞?"
    System->>Keywords: Context + donated keywords improve recognition
    System->>Context: Get previous context (location: "–ú–æ—Å–∫–≤–∞")
    Note over System,Context: Intent: weather.get_forecast + inferred location
    System-->>User: "–ó–∞–≤—Ç—Ä–∞ –≤ –ú–æ—Å–∫–≤–µ –æ–∂–∏–¥–∞–µ—Ç—Å—è +7¬∞C, —Å–æ–ª–Ω–µ—á–Ω–æ"
    
    User->>System: "–ü–æ—Å—Ç–∞–≤—å —Ç–∞–π–º–µ—Ä –Ω–∞ 10 –º–∏–Ω—É—Ç"
    System->>Keywords: Timer handler keywords: ["—Ç–∞–π–º–µ—Ä", "–±—É–¥–∏–ª—å–Ω–∏–∫", "–≤—Ä–µ–º—è"]
    System->>Context: Store new intent: timer.set + duration: "10 –º–∏–Ω—É—Ç"
    System-->>User: "–¢–∞–π–º–µ—Ä –Ω–∞ 10 –º–∏–Ω—É—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
    
    User->>System: "–û—Ç–º–µ–Ω–∏"
    System->>Context: Get recent intents (timer.set found)
    System->>Keywords: Cancel keywords from timer handler
    Note over System,Context: Intent: timer.cancel + inferred timer from context
    System-->>User: "–¢–∞–π–º–µ—Ä –æ—Ç–º–µ–Ω–µ–Ω"
    
    Note over User,Keywords: Keyword donation —É–ª—É—á—à–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ
```

---

## üîß **10. –ü–ê–¢–¢–ï–†–ù–´ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò v13.0.0**

### 10.1 Dependency Injection —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π

```python
# –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∏–Ω–∂–µ–∫—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π
class VoiceAssistantWorkflow(Workflow):
    def __init__(self):
        super().__init__()
        # Fundamental components
        self.voice_trigger = None
        self.asr = None 
        self.text_processor = None      # TODO #2: Stage-specific processors
        self.nlu = None                 # TODO #4,#5: Keyword-first NLU
        self.tts = None
        self.audio_output = None
        
        # Intent system
        self.intent_orchestrator = None
        self.context_manager = None
        
        # Dynamic loading (TODO #1)
        self.dynamic_loader = None
        
    async def initialize(self):
        """Initialize with dependency injection and dynamic loading"""
        cm = self.core.component_manager
        
        # Inject dynamic loader (TODO #1)
        self.dynamic_loader = cm.dynamic_loader
        
        # Inject components (loaded dynamically via entry-points)
        self.voice_trigger = cm.get_component("voice_trigger")
        self.asr = cm.get_component("asr")
        self.text_processor = cm.get_component("text_processor")  # TODO #2 improvements
        self.nlu = cm.get_component("nlu")                       # TODO #4,#5 improvements
        self.tts = cm.get_component("tts")
        self.audio_output = cm.get_component("audio")
        
        # Inject intent system
        self.intent_orchestrator = self.core.intent_orchestrator
        self.context_manager = self.core.context_manager
```

### 10.2 Observer Pattern –¥–ª—è –∏–Ω—Ç–µ–Ω—Ç–æ–≤ —Å keyword donation

```python
# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö –∏–Ω—Ç–µ–Ω—Ç–æ–≤ —Å TODO —É–ª—É—á—à–µ–Ω–∏—è–º–∏
class IntentEventObserver:
    async def on_intent_recognized(self, intent: Intent, confidence: float, method: str):
        """–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–º –∏–Ω—Ç–µ–Ω—Ç–µ (keyword/rule/semantic)"""
        
    async def on_keyword_donated(self, handler_name: str, keywords: Dict[str, List[str]]):
        """–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –¥–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤–∞—Ö (TODO #4)"""
        
    async def on_morphology_generated(self, base_keywords: List[str], generated_forms: List[str]):
        """–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä—É—Å—Å–∫–∏—Ö —Å–ª–æ–≤–æ—Ñ–æ—Ä–º (TODO #5)"""
        
    async def on_intent_executed(self, intent: Intent, result: IntentResult):
        """–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ–Ω—Ç–µ"""
        
    async def on_context_updated(self, session_id: str, context: ConversationContext):
        """–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞"""
```

### 10.3 Strategy Pattern –¥–ª—è NLU –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (TODO #5)

```python
# Keyword-first —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–º–∏ NLU –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
class NLUProviderStrategy:
    def __init__(self):
        self.providers = [
            KeywordMatcherNLUProvider(),    # –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π: –±—ã—Å—Ç—Ä–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
            RuleBasedNLUProvider(),        # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π: regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã  
            SpaCySemanticNLUProvider(),    # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π: —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ
        ]
    
    def select_provider(self, text: str, context: ConversationContext) -> str:
        """–í—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ NLU –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (keyword-first –ø–æ–¥—Ö–æ–¥)"""
        
        # –í—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–µ–º —Å keyword matcher (TODO #5)
        keyword_result = self.providers[0].quick_check(text)
        if keyword_result.confidence >= 0.8:
            return "keyword_matcher"
            
        # –î–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∫–æ–º–∞–Ω–¥ - rule-based
        if len(text.split()) <= 3:
            return "rule_based"
            
        # –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ
        if context.requires_semantic_understanding():
            return "spacy_semantic"
            
        # Fallback to rule-based
        return "rule_based"
```

---

## üìä **11. –ú–ï–¢–†–ò–ö–ò –ò –ú–û–ù–ò–¢–û–†–ò–ù–ì v13.0.0**

### 11.1 –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã —Å TODO —É–ª—É—á—à–µ–Ω–∏—è–º–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ | TODO |
|---------|----------|----------|------|
| **Intent Recognition Accuracy** | –¢–æ—á–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∏–Ω—Ç–µ–Ω—Ç–æ–≤ | NLU Component | #4,#5 |
| **Keyword Donation Coverage** | –ü–æ–∫—Ä—ã—Ç–∏–µ –∏–Ω—Ç–µ–Ω—Ç–æ–≤ –¥–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ | Intent Handlers | #4 |
| **Keyword-first Success Rate** | –ü—Ä–æ—Ü–µ–Ω—Ç –∏–Ω—Ç–µ–Ω—Ç–æ–≤, —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ keyword matching | KeywordMatcherNLU | #5 |
| **Dynamic Loading Efficiency** | –ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–∏–≤–Ω–æ | DynamicLoader | #1 |
| **Text Processing Stage Performance** | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ —ç—Ç–∞–ø–∞–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ | Stage Processors | #2 |
| **Build Size Reduction** | –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Å–±–æ—Ä–∫–∏ —á–µ—Ä–µ–∑ –∞–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ | Build Analyzer | #3 |
| **Wake Word Detection Rate** | –¢–æ—á–Ω–æ—Å—Ç—å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è wake word (INT8) | Voice Trigger | #14 |
| **Context Session Duration** | –°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–π | Context Manager | - |
| **Pipeline Latency** | –í—Ä–µ–º—è –ø–æ–ª–Ω–æ–≥–æ pipeline (voice ‚Üí response) | Workflow | - |
| **Component Availability** | –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | Component Manager | - |

### 11.2 Health checks v13.0.0 —Å TODO –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º

```python
@app.get("/health/intents")
async def intent_system_health():
    return {
        "status": "healthy",
        "version": "14.0.0",
        "components": {
            "voice_trigger": await voice_trigger.health_check(),
            "nlu": await nlu.health_check(),
            "intent_orchestrator": await intent_orchestrator.health_check(),
            "context_manager": await context_manager.health_check(),
            "dynamic_loader": await dynamic_loader.health_check()  # TODO #1
        },
        "todo_improvements": {
            "keyword_donation": {
                "enabled": intent_registry.keyword_donation_enabled,  # TODO #4
                "handlers_participating": len(await get_keyword_donating_handlers()),
                "total_donated_keywords": await count_donated_keywords()
            },
            "keyword_first_nlu": {
                "enabled": nlu.keyword_first_enabled,  # TODO #5
                "success_rate": await get_keyword_matching_success_rate(),
                "fallback_rate": await get_semantic_fallback_rate()
            },
            "text_processing_optimization": {
                "stage_specific_enabled": text_processor.stage_routing_enabled,  # TODO #2
                "performance_improvement": await get_stage_performance_metrics()
            },
            "dynamic_loading": {
                "entry_points_discovered": len(dynamic_loader.discovered_entry_points),  # TODO #1
                "providers_filtered": dynamic_loader.filtering_efficiency,
                "external_packages_supported": len(dynamic_loader.external_packages)
            }
        },
        "metrics": {
            "active_sessions": len(context_manager.sessions),
            "registered_handlers": len(intent_registry._handlers),
            "intent_execution_rate": await get_intent_execution_rate(),
            "average_confidence": await get_average_confidence(),
            "wake_word_detection_rate": await get_wake_word_stats()
        },
        "pipeline": {
            "voice_trigger_enabled": voice_trigger.active,
            "nlu_provider": nlu.default_provider,
            "intent_handlers": list(intent_registry.get_all_handlers().keys()),
            "keyword_first_active": await nlu.is_keyword_first_active()  # TODO #5
        }
    }
```

---

## üéØ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï v13.0.0**

### –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã v13.0.0:

‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π Pipeline**: –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –æ—Ç voice trigger –¥–æ intent execution  
‚úÖ **–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–Ω—Ç–æ–≤**: –ü–æ–Ω–∏–º–∞–Ω–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ NLU  
‚úÖ **Voice Trigger System**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ OpenWakeWord –∏ microWakeWord —Å INT8 –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π  
‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**: Entry-points –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥ –∏ —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å  
‚úÖ **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤  
‚úÖ **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏  
‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞  
‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å graceful degradation  
‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ú–æ—â–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å TOML/ENV –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π  
‚úÖ **–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å**: CLI, –≥–æ–ª–æ—Å, –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –µ–¥–∏–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏  

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ TODO:

üîÑ **Keyword-first NLU**: –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ —Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º–∏ fallback'–∞–º–∏  
üîÑ **Keyword donation**: –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤ –¥–æ–Ω–∏—Ä—É—é—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è  
üîÑ **Entry-points based builds**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Å–±–æ—Ä–∫–∏ —á–µ—Ä–µ–∑ –∞–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏  
üîÑ **Russian morphology**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–æ–≤–æ—Ñ–æ—Ä–º –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è  
üîÑ **Binary WebSocket optimization**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–ª—è ESP32 —É—Å—Ç—Ä–æ–π—Å—Ç–≤  

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –¥–∏–∑–∞–π–Ω–∞ v13.0.0:

üîπ **MECE**: –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏, –∏–Ω—Ç–µ–Ω—Ç–∞–º–∏, –∏ workflow  
üîπ **Intent-Driven**: –í—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É –∏–Ω—Ç–µ–Ω—Ç–æ–≤  
üîπ **Context-Aware**: –ü–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞  
üîπ **Dynamic Loading**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ-—É–ø—Ä–∞–≤–ª—è–µ–º–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤  
üîπ **Performance-Oriented**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∏ —Å–µ–ª–µ–∫—Ç–∏–≤–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É  
üîπ **Separation of Concerns**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏  
üîπ **Dependency Inversion**: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –∏ injection  
üîπ **Single Responsibility**: –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç –æ–¥–Ω—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å  
üîπ **Open/Closed**: –û—Ç–∫—Ä—ã—Ç –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –∑–∞–∫—Ä—ã—Ç –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏  

### –≠–≤–æ–ª—é—Ü–∏—è –æ—Ç v13.0.0 –∫ v13.0.0:

**v13.0.0**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å "Universal Plugins"  
**v13.0.0**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å —Å–∏—Å—Ç–µ–º–æ–π –∏–Ω—Ç–µ–Ω—Ç–æ–≤ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π

–î–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ, –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∏ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞, —Å–ø–æ—Å–æ–±–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞—Ç—å –Ω–∞–º–µ—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ —Å–µ–ª–µ–∫—Ç–∏–≤–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ö –æ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ CLI –¥–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å wake word detection –∏ –≤–µ–±-–¥–æ—Å—Ç—É–ø–æ–º.

**Irene Voice Assistant v13.0.0 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ-–≥–æ—Ç–æ–≤—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è.** 