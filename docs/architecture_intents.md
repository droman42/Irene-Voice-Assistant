# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –°–∏—Å—Ç–µ–º—ã –ò–Ω—Ç–µ–Ω—Ç–æ–≤
## –ù–µ–¥–æ—Å—Ç–∞—é—â–µ–µ –∑–≤–µ–Ω–æ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

---

## üéØ **–ö–ª—é—á–µ–≤–æ–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ**

### –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ

–í –ø—Ä–æ—Ü–µ—Å—Å–µ –∞–Ω–∞–ª–∏–∑–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã Voice Trigger –≤—ã—è–≤–ª–µ–Ω–æ **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ**:

1. **"Universal Plugins" = –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** —Å–∏—Å—Ç–µ–º—ã
2. **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–ª–æ–π Intent Recognition & Orchestration** - –∫–ª—é—á–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤
3. **–°—É—â–µ—Å—Ç–≤—É–µ—Ç –û–î–ò–ù —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π workflow** –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ —Å –≤–∞—Ä–∏–∞—Ü–∏—è–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

---

## ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞—Ç–∏–∫–∞ —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**

### –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π —ç—Ç–∞–ø –≤ pipeline

**–¢–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ (–ù–ï–ü–û–õ–ù–´–ô):**
```
Audio ‚Üí Voice Trigger ‚Üí ASR ‚Üí Text ‚Üí CommandProcessor ‚Üí Response ‚Üí TTS ‚Üí Audio
                                           ‚Üë
                                   –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç Intent Layer!
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- **–ü—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥** –æ—Ç ASR –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∫–æ–º–∞–Ω–¥
- **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç Intent Recognition** - –ø–æ–Ω–∏–º–∞–Ω–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ù–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–º
- **–§—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –∫–æ–º–∞–Ω–¥ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–∞—Ö
- **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π NLU** —Å–ª–æ–π

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ø—É—Ç–∞–Ω–∏—Ü–∞

**"Universal Plugins" –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ:**
- –≠—Ç–æ **—Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** —Å–∏—Å—Ç–µ–º—ã (microservices)
- –ù–ï –ø–ª–∞–≥–∏–Ω—ã –≤ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–º –ø–æ–Ω–∏–º–∞–Ω–∏–∏
- –≠—Ç–æ **—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–µ –±–ª–æ–∫–∏** –ª—é–±–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
- –î–æ–ª–∂–Ω—ã –Ω–∞–∑—ã–≤–∞—Ç—å—Å—è **"Fundamental Components"**

---

## ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞**

### –ü–æ–ª–Ω—ã–π pipeline –æ–±—Ä–∞–±–æ—Ç–∫–∏

```
Input ‚Üí Voice Trigger ‚Üí ASR ‚Üí Text Improvement ‚Üí Intent Recognition ‚Üí Intent Execution ‚Üí TTS ‚Üí Output
```

**–ö–∞–∂–¥—ã–π —ç—Ç–∞–ø –∏–º–µ–µ—Ç —á–µ—Ç–∫—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**

| –≠—Ç–∞–ø | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§—É–Ω–∫—Ü–∏—è | –í—Ö–æ–¥ | –í—ã—Ö–æ–¥ |
|------|-----------|---------|------|-------|
| **1** | VoiceTrigger | Wake word detection | Audio | Wake Signal |
| **2** | ASR | Speech recognition | Audio | Raw Text |
| **3** | TextProcessor | Text improvement | Raw Text | Clean Text |
| **4** | NLU | Intent recognition | Clean Text | Intent + Entities |
| **5** | IntentOrchestrator | Intent routing & execution | Intent | Intent Result |
| **6** | TTS | Speech synthesis | Response Text | Audio |
| **7** | AudioOutput | Audio playback | Audio | Sound |

---

## üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤**

### –û–±—â–∞—è —Å—Ö–µ–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```mermaid
graph TB
    subgraph "üì• –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –≤–≤–æ–¥–∞"
        Mic[Microphone Input]
        Web[Web Audio Input] 
        File[File Audio Input]
        Text[Text Input]
    end
    
    subgraph "üéº –ï–¥–∏–Ω—ã–π Workflow"
        VAW[VoiceAssistantWorkflow<br/>–û—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π pipeline]
    end
    
    subgraph "üîß –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã"
        VT[VoiceTrigger<br/>Wake Word Detection]
        ASR[ASR<br/>Speech ‚Üí Text]
        TP[TextProcessor<br/>Text Improvement]
        NLU[NLU<br/>Intent Recognition]
        TTS[TTS<br/>Text ‚Üí Speech]
        Audio[AudioOutput<br/>Audio Playback]
    end
    
    subgraph "üéØ –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–Ω—Ç–æ–≤ (–ù–û–í–û–ï!)"
        NLU[NLUComponent<br/>Text ‚Üí Intent + Entities]
        IO[IntentOrchestrator<br/>Route & Execute Intents]
        IReg[IntentRegistry<br/>Available Intent Handlers]
        IH[Intent Handlers<br/>Weather, Timer, Chat, etc.]
        CM[ContextManager<br/>Conversation Context]
    end
    
    subgraph "üì§ –¶–µ–ª–∏ –≤—ã–≤–æ–¥–∞"
        Speaker[Speaker Output]
        WebOut[Web Response]
        Console[Console Output]
    end
    
    Mic --> VAW
    Web --> VAW
    File --> VAW
    Text --> VAW
    
    VAW --> VT
    VAW --> ASR
    VAW --> TP
    VAW --> NLU
    VAW --> TTS
    VAW --> Audio
    
    NLU --> IR
    VAW --> IO
    IO --> IReg
    IO --> IH
    IO --> CM
    
    VAW --> Speaker
    VAW --> WebOut
    VAW --> Console
    
    style VAW fill:#ffcdd2,stroke:#d32f2f,stroke-width:3px
    style IO fill:#fff3e0,stroke:#ef6c00,stroke-width:3px
    style IR fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    style CM fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
```

### –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤

```mermaid
graph TB
    subgraph "üß† Intent Recognition"
        Text[Clean Text Input]
        NLU[NLU Component]
        Providers[NLU Providers<br/>spaCy, Rasa, OpenAI, Local]
    end
    
    subgraph "üéØ Intent Processing"
        Intent[Intent Object<br/>name + entities + confidence]
        Orchestrator[Intent Orchestrator]
        Registry[Intent Registry]
        Context[Context Manager]
    end
    
    subgraph "‚ö° Intent Handlers"
        Weather[WeatherHandler<br/>weather.* intents]
        Timer[TimerHandler<br/>timer.* intents]
        Chat[ConversationHandler<br/>chat.* intents]
        System[SystemHandler<br/>system.* intents]
        Custom[Custom Handlers<br/>User-defined]
    end
    
    subgraph "üìä Context & State"
        ConvContext[Conversation Context]
        UserProfile[User Profile]
        Session[Session State]
        Memory[Long-term Memory]
    end
    
    Text --> NLU
    NLU --> Providers
    NLU --> Intent
    
    Intent --> Orchestrator
    Orchestrator --> Registry
    Orchestrator --> Context
    
    Registry --> Weather
    Registry --> Timer
    Registry --> Chat
    Registry --> System
    Registry --> Custom
    
    Context --> ConvContext
    Context --> UserProfile
    Context --> Session
    Context --> Memory
    
    style Intent fill:#ffecb3,stroke:#ff8f00,stroke-width:2px
    style Orchestrator fill:#fff3e0,stroke:#ef6c00,stroke-width:3px
    style Context fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
```

---

## üîß **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

### 1. NLUComponent - NLU –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```python
# irene/components/nlu_component.py
class NLUComponent:
    """
    Natural Language Understanding –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
    Text ‚Üí Intent + Entities + Confidence
    """
    
    def __init__(self, config: NLUConfig):
        self.providers = {}  # Multiple NLU providers
        self.default_provider = config.default_provider
        self.fallback_provider = config.fallback_provider
        
    async def recognize(self, text: str, context: ConversationContext) -> Intent:
        """
        –†–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Ç–µ–∫—Å—Ç–∞
        
        Args:
            text: –û—á–∏—â–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            context: –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
            
        Returns:
            Intent: –û–±—ä–µ–∫—Ç —Å –Ω–∞–º–µ—Ä–µ–Ω–∏–µ–º, —Å—É—â–Ω–æ—Å—Ç—è–º–∏ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é
        """
        
        # Primary NLU provider
        try:
            provider = self.providers[self.default_provider]
            intent = await provider.recognize(text, context)
            
            if intent.confidence >= self.confidence_threshold:
                return intent
                
        except Exception as e:
            self.logger.error(f"Primary NLU failed: {e}")
            
        # Fallback NLU provider
        if self.fallback_provider:
            try:
                provider = self.providers[self.fallback_provider]
                return await provider.recognize(text, context)
            except Exception as e:
                self.logger.error(f"Fallback NLU failed: {e}")
                
        # Default fallback - conversation intent
        return Intent(
            name="conversation.chat",
            entities={"text": text},
            confidence=0.5,
            raw_text=text
        )

class Intent:
    """–û–±—ä–µ–∫—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    
    def __init__(self, name: str, entities: dict, confidence: float, raw_text: str):
        self.name = name                    # "weather.get_current"
        self.entities = entities            # {"location": "Moscow", "time": "now"}
        self.confidence = confidence        # 0.95
        self.raw_text = raw_text           # Original user text
        self.timestamp = time.time()
        
    @property
    def domain(self) -> str:
        """–î–æ–º–µ–Ω –∏–Ω—Ç–µ–Ω—Ç–∞ (weather, timer, etc.)"""
        return self.name.split('.')[0] if '.' in self.name else 'general'
        
    @property  
    def action(self) -> str:
        """–î–µ–π—Å—Ç–≤–∏–µ –∏–Ω—Ç–µ–Ω—Ç–∞ (get_current, set, etc.)"""
        parts = self.name.split('.')
        return parts[1] if len(parts) > 1 else 'default'
```

### 2. IntentOrchestrator - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä

```python
# irene/core/intents/orchestrator.py
class IntentOrchestrator:
    """
    –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –∏–Ω—Ç–µ–Ω—Ç–æ–≤
    –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ–Ω—Ç—ã –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º
    """
    
    def __init__(self, registry: IntentRegistry, context_manager: ContextManager):
        self.registry = registry
        self.context_manager = context_manager
        self.middleware = []  # Intent processing middleware
        
    async def execute_intent(self, intent: Intent, context: ConversationContext) -> IntentResult:
        """
        –í—ã–ø–æ–ª–Ω—è–µ—Ç –∏–Ω—Ç–µ–Ω—Ç —á–µ—Ä–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
        
        Args:
            intent: –†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ–Ω—Ç
            context: –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
            
        Returns:
            IntentResult: –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Ç–µ–Ω—Ç–∞
        """
        
        # Apply middleware (auth, rate limiting, etc.)
        for middleware in self.middleware:
            intent = await middleware.process(intent, context)
            
        # Update conversation context
        await self.context_manager.add_user_turn(intent, context)
        
        try:
            # Get appropriate handler
            handler = await self.registry.get_handler(intent.name)
            if not handler:
                handler = await self.registry.get_fallback_handler()
                
            # Execute intent
            result = await handler.execute(intent, context)
            
            # Update context with result
            await self.context_manager.add_assistant_turn(result, context)
            
            return result
            
        except Exception as e:
            self.logger.error(f"Intent execution failed: {e}")
            
            # Fallback to error handler
            error_handler = await self.registry.get_error_handler()
            return await error_handler.execute(intent, context, error=e)

class IntentResult:
    """–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Ç–µ–Ω—Ç–∞"""
    
    def __init__(self, 
                 text: str,
                 should_speak: bool = True,
                 metadata: dict = None,
                 actions: list = None):
        self.text = text                    # Response text
        self.should_speak = should_speak    # Whether to use TTS
        self.metadata = metadata or {}      # Additional data
        self.actions = actions or []        # Additional actions to perform
        self.timestamp = time.time()
        
    def add_action(self, action_type: str, **params):
        """–î–æ–±–∞–≤–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É"""
        self.actions.append({
            'type': action_type,
            'params': params,
            'timestamp': time.time()
        })
```

### 3. IntentRegistry - –†–µ–µ—Å—Ç—Ä –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

```python
# irene/core/intents/registry.py
class IntentRegistry:
    """
    –†–µ–µ—Å—Ç—Ä –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏–Ω—Ç–µ–Ω—Ç–æ–≤
    –£–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π –∏–Ω—Ç–µ–Ω—Ç–æ–≤
    """
    
    def __init__(self):
        self._handlers = {}                 # intent_name -> handler
        self._domain_handlers = {}          # domain -> handler
        self._pattern_handlers = []         # regex patterns
        self._fallback_handler = None
        self._error_handler = None
        
    def register_handler(self, intent_pattern: str, handler: IntentHandler):
        """
        –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∏–Ω—Ç–µ–Ω—Ç–∞
        
        Args:
            intent_pattern: –ü–∞—Ç—Ç–µ—Ä–Ω –∏–Ω—Ç–µ–Ω—Ç–∞ ("weather.*", "timer.set", etc.)
            handler: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–Ω—Ç–µ–Ω—Ç–∞
        """
        
        if '*' in intent_pattern:
            # Wildcard pattern
            self._pattern_handlers.append((intent_pattern, handler))
        elif '.' in intent_pattern:
            # Specific intent
            self._handlers[intent_pattern] = handler
        else:
            # Domain handler
            self._domain_handlers[intent_pattern] = handler
            
    async def get_handler(self, intent_name: str) -> Optional[IntentHandler]:
        """–ü–æ–ª—É—á–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∏–Ω—Ç–µ–Ω—Ç–∞"""
        
        # Exact match
        if intent_name in self._handlers:
            return self._handlers[intent_name]
            
        # Domain match
        domain = intent_name.split('.')[0]
        if domain in self._domain_handlers:
            return self._domain_handlers[domain]
            
        # Pattern match
        for pattern, handler in self._pattern_handlers:
            if fnmatch.fnmatch(intent_name, pattern):
                return handler
                
        return None
        
    async def get_fallback_handler(self) -> IntentHandler:
        """–ü–æ–ª—É—á–∏—Ç—å fallback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫"""
        return self._fallback_handler
        
    async def get_error_handler(self) -> IntentHandler:
        """–ü–æ–ª—É—á–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫"""
        return self._error_handler
        
    def set_fallback_handler(self, handler: IntentHandler):
        """–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å fallback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫"""
        self._fallback_handler = handler
        
    def set_error_handler(self, handler: IntentHandler):
        """–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫"""
        self._error_handler = handler
```

### 4. ContextManager - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

```python
# irene/core/intents/context.py
class ContextManager:
    """
    –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
    –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º
    """
    
    def __init__(self, config: ContextConfig):
        self.sessions = {}              # session_id -> ConversationContext
        self.max_history = config.max_history_turns
        self.session_timeout = config.session_timeout
        
    async def get_context(self, session_id: str) -> ConversationContext:
        """–ü–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–µ—Å—Å–∏–∏"""
        
        if session_id not in self.sessions:
            self.sessions[session_id] = ConversationContext(
                session_id=session_id,
                started_at=time.time(),
                history=[],
                user_profile={},
                variables={}
            )
            
        context = self.sessions[session_id]
        
        # Check session timeout
        if time.time() - context.last_activity > self.session_timeout:
            await self.reset_context(session_id)
            context = self.sessions[session_id]
            
        return context
        
    async def add_user_turn(self, intent: Intent, context: ConversationContext):
        """–î–æ–±–∞–≤–∏—Ç—å —Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∏—Å—Ç–æ—Ä–∏—é"""
        
        turn = ConversationTurn(
            type="user",
            timestamp=time.time(),
            text=intent.raw_text,
            intent=intent,
            entities=intent.entities
        )
        
        context.history.append(turn)
        context.last_activity = time.time()
        
        # Maintain history limit
        if len(context.history) > self.max_history * 2:  # user + assistant turns
            context.history = context.history[-self.max_history * 2:]
            
    async def add_assistant_turn(self, result: IntentResult, context: ConversationContext):
        """–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –≤ –∏—Å—Ç–æ—Ä–∏—é"""
        
        turn = ConversationTurn(
            type="assistant",
            timestamp=time.time(),
            text=result.text,
            metadata=result.metadata,
            actions=result.actions
        )
        
        context.history.append(turn)
        context.last_activity = time.time()

class ConversationContext:
    """–ö–æ–Ω—Ç–µ–∫—Å—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–∞"""
    
    def __init__(self, session_id: str, started_at: float, history: list, user_profile: dict, variables: dict):
        self.session_id = session_id
        self.started_at = started_at
        self.last_activity = started_at
        self.history = history              # List of ConversationTurn
        self.user_profile = user_profile    # User preferences, location, etc.
        self.variables = variables          # Session variables
        
    def get_recent_intents(self, limit: int = 5) -> list[Intent]:
        """–ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–Ω—Ç–µ–Ω—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        user_turns = [turn for turn in self.history if turn.type == "user"]
        return [turn.intent for turn in user_turns[-limit:]]
        
    def get_variable(self, key: str, default=None):
        """–ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å–µ—Å—Å–∏–∏"""
        return self.variables.get(key, default)
        
    def set_variable(self, key: str, value):
        """–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å–µ—Å—Å–∏–∏"""
        self.variables[key] = value
```

---

## üéØ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤**

### –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞

```python
# irene/core/intents/handlers/base.py
class IntentHandler(ABC):
    """–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏–Ω—Ç–µ–Ω—Ç–æ–≤"""
    
    def __init__(self, name: str):
        self.name = name
        self.logger = logging.getLogger(f"intent.{name}")
        
    @abstractmethod
    async def execute(self, intent: Intent, context: ConversationContext) -> IntentResult:
        """–í—ã–ø–æ–ª–Ω–∏—Ç—å –∏–Ω—Ç–µ–Ω—Ç"""
        pass
        
    @abstractmethod
    def can_handle(self, intent: Intent) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –º–æ–∂–µ—Ç –ª–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∏–Ω—Ç–µ–Ω—Ç"""
        pass
        
    async def validate_entities(self, intent: Intent) -> bool:
        """–í–∞–ª–∏–¥–∞—Ü–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π –∏–Ω—Ç–µ–Ω—Ç–∞"""
        return True
```

### –ü—Ä–∏–º–µ—Ä—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

```python
# irene/core/intents/handlers/weather.py
class WeatherIntentHandler(IntentHandler):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–≥–æ–¥–Ω—ã—Ö –∏–Ω—Ç–µ–Ω—Ç–æ–≤"""
    
    def __init__(self, weather_service: WeatherService):
        super().__init__("weather")
        self.weather_service = weather_service
        
    def can_handle(self, intent: Intent) -> bool:
        return intent.domain == "weather"
        
    async def execute(self, intent: Intent, context: ConversationContext) -> IntentResult:
        if intent.action == "get_current":
            return await self._get_current_weather(intent, context)
        elif intent.action == "get_forecast":
            return await self._get_forecast(intent, context)
        else:
            return IntentResult(
                text="–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ –ø–æ–Ω–∏–º–∞—é —ç—Ç–æ—Ç –ø–æ–≥–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å.",
                should_speak=True
            )
            
    async def _get_current_weather(self, intent: Intent, context: ConversationContext) -> IntentResult:
        location = intent.entities.get("location")
        
        if not location:
            # Try to get location from context
            location = context.user_profile.get("default_location")
            
        if not location:
            return IntentResult(
                text="–î–ª—è –∫–∞–∫–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –ø–æ–≥–æ–¥—É?",
                should_speak=True
            )
            
        try:
            weather = await self.weather_service.get_current_weather(location)
            
            response = f"–í –≥–æ—Ä–æ–¥–µ {location} —Å–µ–π—á–∞—Å {weather.description}, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ {weather.temperature}¬∞C"
            
            return IntentResult(
                text=response,
                should_speak=True,
                metadata={
                    "weather_data": weather.to_dict(),
                    "location": location
                }
            )
            
        except Exception as e:
            self.logger.error(f"Weather service error: {e}")
            return IntentResult(
                text=f"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ø–æ–≥–æ–¥—É –¥–ª—è –≥–æ—Ä–æ–¥–∞ {location}. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",
                should_speak=True
            )

# irene/core/intents/handlers/timer.py  
class TimerIntentHandler(IntentHandler):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–∞–π–º–µ—Ä–æ–≤"""
    
    def __init__(self, timer_service: TimerService):
        super().__init__("timer")
        self.timer_service = timer_service
        
    def can_handle(self, intent: Intent) -> bool:
        return intent.domain == "timer"
        
    async def execute(self, intent: Intent, context: ConversationContext) -> IntentResult:
        if intent.action == "set":
            return await self._set_timer(intent, context)
        elif intent.action == "cancel":
            return await self._cancel_timer(intent, context)
        elif intent.action == "status":
            return await self._get_timer_status(intent, context)
            
    async def _set_timer(self, intent: Intent, context: ConversationContext) -> IntentResult:
        duration = intent.entities.get("duration")
        name = intent.entities.get("name", "–¢–∞–π–º–µ—Ä")
        
        if not duration:
            return IntentResult(
                text="–ù–∞ —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä?",
                should_speak=True
            )
            
        timer_id = await self.timer_service.set_timer(
            duration=duration,
            name=name,
            session_id=context.session_id
        )
        
        return IntentResult(
            text=f"–¢–∞–π–º–µ—Ä '{name}' —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ {duration}",
            should_speak=True,
            metadata={"timer_id": timer_id}
        )

# irene/core/intents/handlers/conversation.py
class ConversationIntentHandler(IntentHandler):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è (fallback)"""
    
    def __init__(self, llm_service: LLMService):
        super().__init__("conversation")
        self.llm_service = llm_service
        
    def can_handle(self, intent: Intent) -> bool:
        return intent.domain in ["conversation", "chat", "general"]
        
    async def execute(self, intent: Intent, context: ConversationContext) -> IntentResult:
        # Get conversation history
        recent_messages = []
        for turn in context.history[-10:]:  # Last 5 exchanges
            if turn.type == "user":
                recent_messages.append({"role": "user", "content": turn.text})
            else:
                recent_messages.append({"role": "assistant", "content": turn.text})
                
        # Add current message
        recent_messages.append({"role": "user", "content": intent.raw_text})
        
        try:
            response = await self.llm_service.generate_response(
                messages=recent_messages,
                system_prompt="–¢—ã –ø–æ–ª–µ–∑–Ω—ã–π –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç Irene. –û—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω–æ."
            )
            
            return IntentResult(
                text=response,
                should_speak=True,
                metadata={"conversation_type": "chat"}
            )
            
        except Exception as e:
            self.logger.error(f"LLM service error: {e}")
            return IntentResult(
                text="–ò–∑–≤–∏–Ω–∏—Ç–µ, —É –º–µ–Ω—è –≤–æ–∑–Ω–∏–∫–ª–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",
                should_speak=True
            )
```

---

## üîÑ **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Voice Assistant Workflow**

### –ü–æ–ª–Ω—ã–π workflow —Å –∏–Ω—Ç–µ–Ω—Ç–∞–º–∏

```python
# irene/plugins/builtin/voice_assistant_workflow_plugin.py (UPDATED)
class VoiceAssistantWorkflowPlugin(CommandPlugin):
    """
    –ï–î–ò–ù–´–ô Voice Assistant Workflow
    –û—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π pipeline —Å —Å–∏—Å—Ç–µ–º–æ–π –∏–Ω—Ç–µ–Ω—Ç–æ–≤
    """
    
    def __init__(self):
        super().__init__()
        # Fundamental components (injected)
        self.voice_trigger = None
        self.asr = None 
        self.text_processor = None      # NEW: Text improvement
        self.nlu = None                 # NEW: Intent recognition
        self.tts = None
        self.audio_output = None
        
        # Intent system (injected)
        self.intent_orchestrator = None # NEW: Intent orchestration
        self.context_manager = None     # NEW: Conversation context
        
    async def initialize(self):
        """Initialize with dependency injection"""
        pm = self.core.plugin_manager
        
        # Fundamental components
        self.voice_trigger = pm.get_plugin("universal_voice_trigger")
        self.asr = pm.get_plugin("universal_asr")
        self.text_processor = pm.get_plugin("universal_text_processor")  # NEW
        self.nlu = pm.get_plugin("universal_nlu")                       # NEW
        self.tts = pm.get_plugin("universal_tts")
        self.audio_output = pm.get_plugin("universal_audio")
        
        # Intent system
        self.intent_orchestrator = self.core.intent_orchestrator         # NEW
        self.context_manager = self.core.context_manager                 # NEW
        
    async def process_audio_stream(self, audio_stream: AsyncIterator[AudioData], request_context: RequestContext):
        """
        –ì–õ–ê–í–ù–´–ô WORKFLOW - –ø–æ–ª–Ω—ã–π pipeline –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
        """
        
        # Get conversation context
        session_id = request_context.session_id or "default"
        conversation_context = await self.context_manager.get_context(session_id)
        
        async for audio_data in audio_stream:
            try:
                # 1. Voice Trigger Detection (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                if self.voice_trigger and not request_context.skip_wake_word:
                    wake_result = await self.voice_trigger.detect(audio_data)
                    if not wake_result.detected:
                        continue  # Keep listening for wake word
                        
                    self.logger.info(f"Wake word '{wake_result.word}' detected")
                    
                # 2. Speech Recognition (ASR)
                if not self.asr:
                    self.logger.warning("ASR component not available")
                    continue
                    
                raw_text = await self.asr.transcribe(audio_data)
                if not raw_text.strip():
                    continue
                    
                self.logger.info(f"ASR result: {raw_text}")
                
                # 3. Text Improvement (–æ—á–∏—Å—Ç–∫–∞, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è)
                improved_text = raw_text
                if self.text_processor:
                    improved_text = await self.text_processor.improve(raw_text, conversation_context)
                    self.logger.info(f"Improved text: {improved_text}")
                    
                # 4. Intent Recognition (NLU) - –ö–õ–Æ–ß–ï–í–û–ô –ù–û–í–´–ô –≠–¢–ê–ü
                if not self.nlu:
                    # Fallback to direct conversation
                    intent = Intent(
                        name="conversation.chat",
                        entities={"text": improved_text},
                        confidence=0.5,
                        raw_text=improved_text
                    )
                else:
                    intent = await self.nlu.recognize(improved_text, conversation_context)
                    
                self.logger.info(f"Intent recognized: {intent.name} (confidence: {intent.confidence})")
                
                # 5. Intent Execution - –ù–û–í–´–ô –¶–ï–ù–¢–†–ê–õ–¨–ù–´–ô –≠–¢–ê–ü
                if not self.intent_orchestrator:
                    self.logger.error("Intent orchestrator not available")
                    continue
                    
                intent_result = await self.intent_orchestrator.execute_intent(intent, conversation_context)
                
                # 6. Response Generation & TTS
                if intent_result.should_speak and self.tts:
                    audio_response = await self.tts.synthesize(intent_result.text)
                    
                    # 7. Audio Output
                    if self.audio_output and audio_response:
                        await self.audio_output.play(audio_response)
                        
                # 8. Additional Actions
                for action in intent_result.actions:
                    await self._execute_action(action, conversation_context)
                    
                # 9. Update request context
                request_context.last_response = intent_result.text
                request_context.last_intent = intent.name
                
            except Exception as e:
                self.logger.error(f"Workflow error: {e}")
                
                # Error recovery
                error_response = "–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑."
                if self.tts:
                    error_audio = await self.tts.synthesize(error_response)
                    if self.audio_output:
                        await self.audio_output.play(error_audio)
                        
    async def _execute_action(self, action: dict, context: ConversationContext):
        """–í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏–∑ intent result"""
        action_type = action.get("type")
        params = action.get("params", {})
        
        if action_type == "set_user_preference":
            context.user_profile.update(params)
        elif action_type == "play_sound":
            sound_file = params.get("file")
            if self.audio_output and sound_file:
                await self.audio_output.play_file(sound_file)
        elif action_type == "send_notification":
            # Send system notification
            pass
```

---

## ‚öôÔ∏è **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤**

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```toml
# config.toml - –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
[voice_assistant]
workflow = "standard"           # –ï–¥–∏–Ω—ã–π workflow —Å –≤–∞—Ä–∏–∞—Ü–∏—è–º–∏
mode = "voice_triggered"        # voice_triggered | continuous | hybrid

# –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
[components]
voice_trigger = true
asr = true
text_processor = true           # –ù–û–í–´–ô: Text improvement
nlu = true                      # –ù–û–í–´–ô: Intent recognition
tts = true
audio_output = true

# –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–Ω—Ç–æ–≤
[intents]
enabled = true
confidence_threshold = 0.7
fallback_handler = "conversation"
max_history_turns = 10
session_timeout = 1800          # 30 minutes

# Intent handlers
[intents.handlers]
weather = true
timer = true
conversation = true
system = true
custom = []                     # List of custom handler modules

# NLU Configuration
[components.nlu]
provider = "spacy"              # spacy | rasa | openai | local
fallback_provider = "rule_based"
confidence_threshold = 0.7

[components.nlu.provider_configs.spacy]
model_path = "./models/nlu/ru_core_news_sm"
custom_entities = ["location", "time", "duration"]

[components.nlu.provider_configs.openai]
api_key = "${OPENAI_API_KEY}"
model = "gpt-3.5-turbo"
temperature = 0.1

# Text Processing
[components.text_processor]
provider = "spacy"
normalize_numbers = true
fix_spelling = true
remove_filler_words = true

# Context Management
[intents.context]
max_history_turns = 10
session_timeout = 1800
persist_sessions = true
storage_backend = "file"        # file | redis | database

# Intent Registry
[intents.registry]
auto_discover = true
custom_handlers_path = "./custom_intents"
builtin_handlers = [
    "weather",
    "timer", 
    "conversation",
    "system",
    "datetime"
]
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# Intent System
export IRENE_INTENTS__ENABLED=true
export IRENE_INTENTS__CONFIDENCE_THRESHOLD=0.7
export IRENE_INTENTS__FALLBACK_HANDLER=conversation

# NLU Configuration  
export IRENE_COMPONENTS__NLU__PROVIDER=spacy
export IRENE_COMPONENTS__NLU__MODEL_PATH=/opt/irene/models/nlu/

# OpenAI NLU (if using)
export IRENE_COMPONENTS__NLU__OPENAI_API_KEY=sk-...

# Context Storage
export IRENE_INTENTS__CONTEXT__STORAGE_BACKEND=redis
export IRENE_INTENTS__CONTEXT__REDIS_URL=redis://localhost:6379
```

---

## üåê **Web API —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**

### –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤

```python
# Web API —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
@app.post("/intents/recognize")
async def recognize_intent(text: str, session_id: str = "default"):
    """–†–∞—Å–ø–æ–∑–Ω–∞—Ç—å –∏–Ω—Ç–µ–Ω—Ç –∏–∑ —Ç–µ–∫—Å—Ç–∞"""
    context = await context_manager.get_context(session_id)
    intent = await nlu.recognize(text, context)
    return {
        "intent": intent.name,
        "entities": intent.entities,
        "confidence": intent.confidence
    }

@app.post("/intents/execute") 
async def execute_intent(intent_name: str, entities: dict, session_id: str = "default"):
    """–í—ã–ø–æ–ª–Ω–∏—Ç—å –∏–Ω—Ç–µ–Ω—Ç –Ω–∞–ø—Ä—è–º—É—é"""
    context = await context_manager.get_context(session_id)
    intent = Intent(intent_name, entities, 1.0, "")
    result = await intent_orchestrator.execute_intent(intent, context)
    return {
        "response": result.text,
        "should_speak": result.should_speak,
        "actions": result.actions
    }

@app.get("/intents/handlers")
async def list_intent_handlers():
    """–°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏–Ω—Ç–µ–Ω—Ç–æ–≤"""
    return intent_registry.get_all_handlers()

@app.get("/intents/context/{session_id}")
async def get_conversation_context(session_id: str):
    """–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–∞"""
    context = await context_manager.get_context(session_id)
    return {
        "session_id": context.session_id,
        "history": context.history[-10:],  # Last 10 turns
        "user_profile": context.user_profile,
        "variables": context.variables
    }

@app.post("/intents/context/{session_id}/reset")
async def reset_conversation_context(session_id: str):
    """–°–±—Ä–æ—Å–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–∞"""
    await context_manager.reset_context(session_id)
    return {"status": "reset", "session_id": session_id}

@app.post("/voice_assistant/process_text")
async def process_text_input(text: str, session_id: str = "default"):
    """–û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥ —á–µ—Ä–µ–∑ –ø–æ–ª–Ω—ã–π pipeline"""
    context = await context_manager.get_context(session_id)
    
    # Skip voice trigger and ASR for text input
    improved_text = await text_processor.improve(text, context)
    intent = await nlu.recognize(improved_text, context)
    result = await intent_orchestrator.execute_intent(intent, context)
    
    return {
        "response": result.text,
        "intent": intent.name,
        "confidence": intent.confidence,
        "should_speak": result.should_speak
    }
```

---

## üöÄ **–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

### Phase 1: Core Intent Infrastructure
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã Intent, IntentResult, ConversationContext
2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å NLUComponent (NLU –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å IntentOrchestrator (—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä)
4. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å IntentRegistry (—Ä–µ–µ—Å—Ç—Ä –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)
5. ‚úÖ –°–æ–∑–¥–∞—Ç—å ContextManager (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º)

### Phase 2: Fundamental Components Update
1. üîÑ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å "Universal Plugins" ‚Üí "Fundamental Components"
2. üîÑ –°–æ–∑–¥–∞—Ç—å UniversalNLUPlugin –∫–∞–∫ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
3. üîÑ –°–æ–∑–¥–∞—Ç—å UniversalTextProcessorPlugin –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
4. üîÑ –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### Phase 3: Intent Handlers Implementation
1. üîÑ –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π IntentHandler –∫–ª–∞—Å—Å
2. üîÑ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å WeatherIntentHandler
3. üîÑ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å TimerIntentHandler  
4. üîÑ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å ConversationIntentHandler (LLM fallback)
5. üîÑ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å SystemIntentHandler (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º)

### Phase 4: Workflow Integration
1. üîÑ –û–±–Ω–æ–≤–∏—Ç—å VoiceAssistantWorkflowPlugin —Å –ø–æ–ª–Ω—ã–º pipeline
2. üîÑ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –∏–Ω—Ç–µ–Ω—Ç–æ–≤ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
3. üîÑ –û–±–µ—Å–ø–µ—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ç–µ–∫—É—â–∏–º–∏ –ø–ª–∞–≥–∏–Ω–∞–º–∏
4. üîÑ –û–±–Ω–æ–≤–∏—Ç—å InputManager –∏ OutputManager

### Phase 5: NLU Providers
1. üîÑ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å SpaCyNLUProvider (–±–∞–∑–æ–≤—ã–π)
2. üîÑ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å RuleBasedNLUProvider (fallback)
3. üîÑ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å OpenAINLUProvider (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π)
4. üîÑ –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –æ–±—É—á–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ NLU –º–æ–¥–µ–ª–µ–π

### Phase 6: Web API & Tools
1. üîÑ –î–æ–±–∞–≤–∏—Ç—å intent management Web API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
2. üîÑ –°–æ–∑–¥–∞—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ–Ω—Ç–∞–º–∏
3. üîÑ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–Ω—Ç–µ–Ω—Ç–æ–≤
4. üîÑ –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ—Ç–ª–∞–¥–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Phase 7: Advanced Features
1. üîÑ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (Redis/Database)
2. üîÑ –î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É middleware –¥–ª—è –∏–Ω—Ç–µ–Ω—Ç–æ–≤
3. üîÑ –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ–Ω—Ç–æ–≤
4. üîÑ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏ –º–µ—Ç—Ä–∏–∫–∏

---

## üîß **Deployment Profiles Update**

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

```python
# –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ deployment profiles
def get_deployment_profile(self) -> str:
    available = set(self._components.keys())
    intent_system = "nlu" in available and "intents" in self.config
    
    if {"microphone", "voice_trigger", "asr", "nlu", "tts", "audio_output"} <= available:
        if intent_system:
            return "Smart Voice Assistant"       # –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å –∏–Ω—Ç–µ–Ω—Ç–∞–º–∏
        else:
            return "Voice Assistant (Legacy)"   # –ë–µ–∑ —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤
    elif {"asr", "nlu", "tts"} <= available:
        if intent_system:
            return "Text Assistant"             # –¢–µ–∫—Å—Ç–æ–≤—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å –∏–Ω—Ç–µ–Ω—Ç–∞–º–∏
        else:
            return "Text Assistant (Legacy)"
    elif {"voice_trigger", "web_api"} <= available:
        return "Voice Trigger Service"          # –¢–æ–ª—å–∫–æ wake word detection
    elif "web_api" in available:
        return "API Server"
    else:
        return "Headless"
```

---

## üìä **–ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|---------|----------|----------|
| **Intent Recognition Accuracy** | –¢–æ—á–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∏–Ω—Ç–µ–Ω—Ç–æ–≤ | NLU Component |
| **Intent Execution Success Rate** | –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ–Ω—Ç–æ–≤ | IntentOrchestrator |
| **Intent Confidence Distribution** | –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ NLU | Intent Recognition |
| **Average Response Time** | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–∞ | End-to-end Pipeline |
| **Fallback Rate** | –ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è fallback handler | Intent Registry |
| **Context Session Duration** | –°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–π | Context Manager |
| **User Satisfaction Score** | –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ | Feedback System |

### Health checks –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤

```python
@app.get("/health/intents")
async def intent_system_health():
    return {
        "status": "healthy",
        "components": {
            "nlu": await nlu.health_check(),
            "intent_orchestrator": await intent_orchestrator.health_check(),
            "context_manager": await context_manager.health_check(),
            "intent_registry": intent_registry.get_status()
        },
        "metrics": {
            "active_sessions": len(context_manager.sessions),
            "registered_handlers": len(intent_registry._handlers),
            "intent_execution_rate": await get_intent_execution_rate(),
            "average_confidence": await get_average_confidence()
        }
    }
```

---

## üéØ **–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

‚úÖ **–ü–æ–ª–Ω—ã–π Pipeline**: –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –æ—Ç –∞—É–¥–∏–æ –¥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Ç–µ–Ω—Ç–æ–≤  
‚úÖ **–°–º—ã—Å–ª–æ–≤–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ**: NLU –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
‚úÖ **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –æ—Å–≤–µ–¥–æ–º–ª–µ–Ω–Ω–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ—Ö–æ–¥–æ–≤—ã—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤  
‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç —á–µ—Ç–∫—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å  
‚úÖ **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –ü—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö intent handlers  
‚úÖ **Fallback —Å–∏—Å—Ç–µ–º–∞**: –ì—Ä–∞—Ü–∏–æ–∑–Ω–∞—è –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö NLU  
‚úÖ **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –û–¥–∏–Ω workflow –¥–ª—è –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤  

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

‚úÖ **–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –º–Ω–æ–≥–æ—Ö–æ–¥–æ–≤—ã—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤  
‚úÖ **–¢–æ—á–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ**: NLU —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏—è —Ç–æ—á–Ω–µ–µ —á–µ–º regex  
‚úÖ **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: User profile –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ  
‚úÖ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –ü–æ–¥—Ä–æ–±–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –¥–æ–º–µ–Ω–æ–≤ –∏ –Ω–∞–≤—ã–∫–æ–≤  
‚úÖ **–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å**: NLU –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —è–∑—ã–∫–∏  

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö  
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã  
‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏  
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ü–æ–¥—Ä–æ–±–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ pipeline  
‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤  
‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å v13  

---

## üìû **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π v13**

–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–Ω—Ç–æ–≤ **–ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–ø–æ–ª–Ω—è–µ—Ç** —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É v13:

- ‚úÖ **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã** v13 (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å, –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å, graceful degradation)
- ‚úÖ **–†–∞—Å—à–∏—Ä—è–µ—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** (–¥–æ–±–∞–≤–ª—è–µ—Ç NLU –∏ TextProcessor)
- ‚úÖ **–£–ø—Ä–æ—â–∞–µ—Ç workflow –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** (–æ–¥–∏–Ω —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π workflow)
- ‚úÖ **–ó–∞–ø–æ–ª–Ω—è–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø—Ä–æ–±–µ–ª** (–¥–æ–±–∞–≤–ª—è–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π intent layer)
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ä–µ–∂–∏–º—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è** —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏
- ‚úÖ **–û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø–ª–∞–≥–∏–Ω–∞–º–∏

**–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–Ω—Ç–æ–≤ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç Irene Voice Assistant –∏–∑ –ø—Ä–æ—Å—Ç–æ–≥–æ voice-to-text —Ä–µ—à–µ–Ω–∏—è –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –Ω–∞–º–µ—Ä–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.**

---

## üîå **–ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ –∏ –Ω–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π**

### –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–ª–∞–≥–∏–Ω–æ–≤

–ù–∞ –æ—Å–Ω–æ–≤–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –ø–∞–ø–∫–∏ `irene/plugins/builtin/` –≤—ã—è–≤–ª–µ–Ω–∞ **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ø—É—Ç–∞–Ω–∏—Ü–∞**:

```mermaid
graph TB
    subgraph "üìÇ –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: irene/plugins/builtin/"
        subgraph "üéØ –ù–∞—Å—Ç–æ—è—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤"
            IH1[greetings_plugin.py<br/>GreetingsPlugin]
            IH2[timer_plugin.py<br/>AsyncTimerPlugin]
            IH3[datetime_plugin.py<br/>DateTimePlugin]
            IH4[random_plugin.py<br/>RandomPlugin]
            IH5[core_commands.py<br/>CoreCommandsPlugin]
            IH6[conversation_plugin.py<br/>ConversationPlugin]
        end
        
        subgraph "üîß –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–æ—à–∏–±–æ—á–Ω–æ –Ω–∞–∑–≤–∞–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω–∞–º–∏)"
            FC1[universal_tts_plugin.py<br/>UniversalTTSPlugin]
            FC2[universal_audio_plugin.py<br/>UniversalAudioPlugin]
            FC3[universal_asr_plugin.py<br/>UniversalASRPlugin]
            FC4[universal_llm_plugin.py<br/>UniversalLLMPlugin]
        end
        
        subgraph "üß™ –î–µ–º–æ/–£—Ç–∏–ª–∏—Ç—ã"
            DEMO[async_service_demo.py<br/>AsyncServiceDemoPlugin]
        end
    end
    
    style IH1 fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    style IH2 fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    style IH3 fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    style IH4 fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    style IH5 fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    style IH6 fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    
    style FC1 fill:#ffecb3,stroke:#ff8f00,stroke-width:3px
    style FC2 fill:#ffecb3,stroke:#ff8f00,stroke-width:3px
    style FC3 fill:#ffecb3,stroke:#ff8f00,stroke-width:3px
    style FC4 fill:#ffecb3,stroke:#ff8f00,stroke-width:3px
    
    style DEMO fill:#f3e5f5,stroke:#7b1fa2,stroke-width:1px
```

### –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–µ–∫—É—â–∏—Ö "–ø–ª–∞–≥–∏–Ω–æ–≤"

#### üéØ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤ (6 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)**
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç **–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏—è**:

| –ü–ª–∞–≥–∏–Ω | –ö–ª–∞—Å—Å | –î–æ–º–µ–Ω –∏–Ω—Ç–µ–Ω—Ç–æ–≤ | –§—É–Ω–∫—Ü–∏—è |
|--------|-------|----------------|---------|
| `greetings_plugin.py` | GreetingsPlugin | greetings.* | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è, –ø—Ä–æ—â–∞–Ω–∏—è |
| `timer_plugin.py` | AsyncTimerPlugin | timer.* | –£—Å—Ç–∞–Ω–æ–≤–∫–∞, –æ—Ç–º–µ–Ω–∞ —Ç–∞–π–º–µ—Ä–æ–≤ |
| `datetime_plugin.py` | DateTimePlugin | datetime.* | –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è, –¥–∞—Ç–∞ |
| `random_plugin.py` | RandomPlugin | random.* | –°–ª—É—á–∞–π–Ω—ã–µ —á–∏—Å–ª–∞, —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è |
| `core_commands.py` | CoreCommandsPlugin | system.* | –°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã, –ø–æ–º–æ—â—å |
| `conversation_plugin.py` | ConversationPlugin | conversation.* | –°–≤–æ–±–æ–¥–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ LLM |

#### üîß **–§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (4 —ç–ª–µ–º–µ–Ω—Ç–∞)**
–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç **–±–∞–∑–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏** (–æ—à–∏–±–æ—á–Ω–æ –Ω–∞–∑–≤–∞–Ω—ã –ø–ª–∞–≥–∏–Ω–∞–º–∏):

| "–ü–ª–∞–≥–∏–Ω" | –ö–ª–∞—Å—Å | –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | –§—É–Ω–∫—Ü–∏—è |
|----------|-------|-------------|---------|
| `universal_tts_plugin.py` | UniversalTTSPlugin | Text-to-Speech | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è TTS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ |
| `universal_audio_plugin.py` | UniversalAudioPlugin | Audio I/O | –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å –∞—É–¥–∏–æ |
| `universal_asr_plugin.py` | UniversalASRPlugin | Speech Recognition | Speech-to-text |
| `universal_llm_plugin.py` | UniversalLLMPlugin | Language Models | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ |

---

## üèóÔ∏è **–ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π**

### –ü—Ä–∏–Ω—Ü–∏–ø—ã MECE (–í–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ –∏ –ò—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)

```mermaid
graph TB
    subgraph "üèóÔ∏è –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (MECE)"
        subgraph "üîß irene/components/ (–§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)"
            C1[tts_component.py<br/>TTSComponent]
            C2[audio_component.py<br/>AudioComponent]
            C3[asr_component.py<br/>ASRComponent]
            C4[llm_component.py<br/>LLMComponent]
            C5[nlu_component.py<br/>NLUComponent]
            C6[voice_trigger_component.py<br/>VoiceTriggerComponent]
            C7[text_processor_component.py<br/>TextProcessorComponent]
        end
        
        subgraph "üéØ irene/intents/handlers/ (–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤)"
            IH1[greetings.py<br/>GreetingsHandler]
            IH2[timer.py<br/>TimerHandler]
            IH3[datetime.py<br/>DateTimeHandler]
            IH4[random.py<br/>RandomHandler]
            IH5[system.py<br/>SystemHandler]
            IH6[conversation.py<br/>ConversationHandler]
            IH7[weather.py<br/>WeatherHandler]
        end
        
        subgraph "üéº irene/workflows/ (–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä—ã workflow)"
            WF1[voice_assistant.py<br/>VoiceAssistantWorkflow]
            WF2[text_assistant.py<br/>TextAssistantWorkflow]
            WF3[api_service.py<br/>APIServiceWorkflow]
        end
        
        subgraph "üéØ irene/intents/ (–Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤)"
            NLU1[nlu_component.py<br/>NLUComponent]
            INT2[orchestrator.py<br/>IntentOrchestrator]
            INT3[registry.py<br/>IntentRegistry]
            INT4[context.py<br/>ContextManager]
        end
        
        subgraph "üîå irene/plugins/ (–ò—Å—Ç–∏–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã)"
            P1[–†–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤]
            P2[–ù–æ–≤—ã–µ –¥–æ–º–µ–Ω—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤]
            P3[–í–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏]
            P4[–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏]
        end
    end
    
    style C1 fill:#ffecb3,stroke:#ff8f00,stroke-width:2px
    style C2 fill:#ffecb3,stroke:#ff8f00,stroke-width:2px
    style C3 fill:#ffecb3,stroke:#ff8f00,stroke-width:2px
    style C4 fill:#ffecb3,stroke:#ff8f00,stroke-width:2px
    style C5 fill:#ffecb3,stroke:#ff8f00,stroke-width:2px
    style C6 fill:#ffecb3,stroke:#ff8f00,stroke-width:2px
    style C7 fill:#ffecb3,stroke:#ff8f00,stroke-width:2px
    
    style IH1 fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    style IH2 fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    style IH3 fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    style IH4 fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    style IH5 fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    style IH6 fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    style IH7 fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    
    style WF1 fill:#ffcdd2,stroke:#d32f2f,stroke-width:2px
    style WF2 fill:#ffcdd2,stroke:#d32f2f,stroke-width:2px
    style WF3 fill:#ffcdd2,stroke:#d32f2f,stroke-width:2px
    
    style INT1 fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    style INT2 fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    style INT3 fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    style INT4 fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    
    style P1 fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style P2 fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style P3 fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style P4 fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
```

### –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

```
irene/
‚îú‚îÄ‚îÄ components/                     # üîß –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ base.py                    # –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ tts_component.py           # –ë—ã–ª–æ: universal_tts_plugin.py
‚îÇ   ‚îú‚îÄ‚îÄ audio_component.py         # –ë—ã–ª–æ: universal_audio_plugin.py
‚îÇ   ‚îú‚îÄ‚îÄ asr_component.py           # –ë—ã–ª–æ: universal_asr_plugin.py
‚îÇ   ‚îú‚îÄ‚îÄ llm_component.py           # –ë—ã–ª–æ: universal_llm_plugin.py
‚îÇ   ‚îú‚îÄ‚îÄ nlu_component.py           # –ù–û–í–´–ô: –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ voice_trigger_component.py # –ù–û–í–´–ô: Wake word detection
‚îÇ   ‚îî‚îÄ‚îÄ text_processor_component.py # –ù–û–í–´–ô: –£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
‚îÇ
‚îú‚îÄ‚îÄ intents/                       # üéØ –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ (removed)                  # IntentRecognizer (replaced by NLUComponent)
‚îÇ   ‚îú‚îÄ‚îÄ orchestrator.py            # IntentOrchestrator
‚îÇ   ‚îú‚îÄ‚îÄ registry.py                # IntentRegistry
‚îÇ   ‚îú‚îÄ‚îÄ context.py                 # ContextManager
‚îÇ   ‚îú‚îÄ‚îÄ models.py                  # Intent, IntentResult –∫–ª–∞—Å—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ handlers/                  # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ base.py               # –ë–∞–∑–æ–≤—ã–π IntentHandler
‚îÇ       ‚îú‚îÄ‚îÄ greetings.py          # –ë—ã–ª–æ: greetings_plugin.py
‚îÇ       ‚îú‚îÄ‚îÄ timer.py              # –ë—ã–ª–æ: timer_plugin.py
‚îÇ       ‚îú‚îÄ‚îÄ datetime.py           # –ë—ã–ª–æ: datetime_plugin.py
‚îÇ       ‚îú‚îÄ‚îÄ random.py             # –ë—ã–ª–æ: random_plugin.py
‚îÇ       ‚îú‚îÄ‚îÄ system.py             # –ë—ã–ª–æ: core_commands.py
‚îÇ       ‚îú‚îÄ‚îÄ conversation.py       # –ë—ã–ª–æ: conversation_plugin.py
‚îÇ       ‚îî‚îÄ‚îÄ weather.py            # –ù–û–í–´–ô: –ü–æ–≥–æ–¥–Ω—ã–µ –∏–Ω—Ç–µ–Ω—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ workflows/                     # üéº –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä—ã workflow
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ base.py                   # –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã workflow
‚îÇ   ‚îú‚îÄ‚îÄ voice_assistant.py        # VoiceAssistantWorkflow
‚îÇ   ‚îú‚îÄ‚îÄ text_assistant.py         # TextAssistantWorkflow
‚îÇ   ‚îî‚îÄ‚îÄ api_service.py            # APIServiceWorkflow
‚îÇ
‚îî‚îÄ‚îÄ plugins/                       # üîå –ò—Å—Ç–∏–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ base.py                   # –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –ø–ª–∞–≥–∏–Ω–æ–≤
    ‚îú‚îÄ‚îÄ manager.py                # –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–ª–∞–≥–∏–Ω–æ–≤
    ‚îú‚îÄ‚îÄ registry.py               # –†–µ–µ—Å—Ç—Ä –ø–ª–∞–≥–∏–Ω–æ–≤
    ‚îú‚îÄ‚îÄ external/                 # –í–Ω–µ—à–Ω–∏–µ –ø–ª–∞–≥–∏–Ω—ã
    ‚îú‚îÄ‚îÄ examples/                 # –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
    ‚îÇ   ‚îú‚îÄ‚îÄ provider_example.py   # –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
    ‚îÇ   ‚îú‚îÄ‚îÄ intent_example.py     # –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω –∏–Ω—Ç–µ–Ω—Ç–æ–≤
    ‚îÇ   ‚îî‚îÄ‚îÄ integration_example.py # –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ API
    ‚îî‚îÄ‚îÄ builtin_contrib/          # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã
        ‚îú‚îÄ‚îÄ smart_home/           # –£–º–Ω—ã–π –¥–æ–º
        ‚îú‚îÄ‚îÄ productivity/         # –ö–∞–ª–µ–Ω–¥–∞—Ä—å, email, –∑–∞–¥–∞—á–∏
        ‚îú‚îÄ‚îÄ entertainment/        # –ú—É–∑—ã–∫–∞, –∏–≥—Ä—ã
        ‚îî‚îÄ‚îÄ development/          # –û—Ç–ª–∞–¥–∫–∞, –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
```

---

## üîå **–†–æ–ª—å –ø–ª–∞–≥–∏–Ω–æ–≤ –≤ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ**

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Å—Ç–∏–Ω–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤

**–ü–ª–∞–≥–∏–Ω—ã** –≤ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç **—Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞ —Å–∏—Å—Ç–µ–º—ã**.

```mermaid
graph LR
    subgraph "üèóÔ∏è –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)"
        subgraph "üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã"
            TTS[TTS Component]
            ASR[ASR Component]
            NLU[NLU Component]
        end
        
        subgraph "üéØ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤"
            Greet[Greetings Handler]
            Timer[Timer Handler]
            System[System Handler]
        end
        
        subgraph "üéº Workflows"
            VA[Voice Assistant Workflow]
            TA[Text Assistant Workflow]
        end
    end
    
    subgraph "üîå –°–∏—Å—Ç–µ–º–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ (–†–∞—Å—à–∏—Ä—è–µ–º–∞—è)"
        subgraph "üîß –ü–ª–∞–≥–∏–Ω—ã –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤"
            PP1[–ö–∞—Å—Ç–æ–º–Ω—ã–π TTS –ø—Ä–æ–≤–∞–π–¥–µ—Ä]
            PP2[–ö–∞—Å—Ç–æ–º–Ω—ã–π ASR –ø—Ä–æ–≤–∞–π–¥–µ—Ä]
            PP3[–ö–∞—Å—Ç–æ–º–Ω—ã–π NLU –ø—Ä–æ–≤–∞–π–¥–µ—Ä]
        end
        
        subgraph "üéØ –ü–ª–∞–≥–∏–Ω—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤"
            IP1[–ü–ª–∞–≥–∏–Ω —É–º–Ω–æ–≥–æ –¥–æ–º–∞]
            IP2[–ü–ª–∞–≥–∏–Ω –∫–∞–ª–µ–Ω–¥–∞—Ä—è]
            IP3[–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞]
        end
        
        subgraph "üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã"
            TP1[–ü–ª–∞–≥–∏–Ω –æ—Ç–ª–∞–¥–∫–∏]
            TP2[–ü–ª–∞–≥–∏–Ω –∞–Ω–∞–ª–∏—Ç–∏–∫–∏]
            TP3[–ü–ª–∞–≥–∏–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞]
        end
        
        subgraph "üåê –ü–ª–∞–≥–∏–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏"
            INT1[–í–Ω–µ—à–Ω–∏–µ API]
            INT2[–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö]
            INT3[Webhooks]
        end
    end
    
    TTS -.->|–∏—Å–ø–æ–ª—å–∑—É–µ—Ç| PP1
    ASR -.->|–∏—Å–ø–æ–ª—å–∑—É–µ—Ç| PP2
    NLU -.->|–∏—Å–ø–æ–ª—å–∑—É–µ—Ç| PP3
    
    VA -.->|–æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É–µ—Ç| IP1
    VA -.->|–æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É–µ—Ç| IP2
    
    style TTS fill:#ffecb3
    style ASR fill:#ffecb3
    style NLU fill:#ffecb3
    style Greet fill:#e8f5e8
    style Timer fill:#e8f5e8
    style VA fill:#ffcdd2
    
    style PP1 fill:#f3e5f5
    style PP2 fill:#f3e5f5
    style IP1 fill:#fff3e0
    style TP1 fill:#e1f5fe
```

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–ª–∞–≥–∏–Ω–æ–≤ (MECE)

#### 1. üîß **–ü–ª–∞–≥–∏–Ω—ã –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤**
**–†–∞—Å—à–∏—Ä—è—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏:**

```python
# –ü—Ä–∏–º–µ—Ä: –ü–ª–∞–≥–∏–Ω –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ TTS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
class CustomTTSProviderPlugin(Plugin):
    """–î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π TTS –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤ TTS –∫–æ–º–ø–æ–Ω–µ–Ω—Ç"""
    
    def register(self, core):
        # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º TTS –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
        tts_component = core.get_component("tts")
        tts_component.register_provider("my_custom_tts", MyCustomTTSProvider())
```

**–°–ª—É—á–∞–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –ù–æ–≤—ã–µ TTS –¥–≤–∏–∂–∫–∏ (Azure Cognitive Services, Google Cloud TTS)
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ ASR –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (Azure Speech, IBM Watson)
- –ü—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω—ã–µ NLU –º–æ–¥–µ–ª–∏
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∞—É–¥–∏–æ –±—ç–∫–µ–Ω–¥—ã
- –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

#### 2. üéØ **–ü–ª–∞–≥–∏–Ω—ã –¥–æ–º–µ–Ω–æ–≤ –∏–Ω—Ç–µ–Ω—Ç–æ–≤**
**–î–æ–±–∞–≤–ª—è—é—Ç –Ω–æ–≤—ã–µ –¥–æ–º–µ–Ω—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤, –Ω–µ –ø–æ–∫—Ä—ã—Ç—ã–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏:**

```python
# –ü—Ä–∏–º–µ—Ä: –ü–ª–∞–≥–∏–Ω —É–º–Ω–æ–≥–æ –¥–æ–º–∞
class SmartHomePlugin(Plugin):
    """–î–æ–±–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–º–Ω—ã–º –¥–æ–º–æ–º"""
    
    def register(self, core):
        # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤
        intent_registry = core.get_intent_registry()
        intent_registry.register_handler("lights.*", LightsHandler())
        intent_registry.register_handler("thermostat.*", ThermostatHandler())
        intent_registry.register_handler("security.*", SecurityHandler())
```

**–°–ª—É—á–∞–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–º–Ω—ã–º –¥–æ–º–æ–º (Philips Hue, Nest, etc.)
- –ë–∏–∑–Ω–µ—Å-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏–Ω—Ç–µ–Ω—Ç—ã (CRM, –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å, etc.)
- –õ–∏—á–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–∫–∞–ª–µ–Ω–¥–∞—Ä—å, email, –∑–∞–¥–∞—á–∏)
- –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è (–º—É–∑—ã–∫–∞, –ø–æ–¥–∫–∞—Å—Ç—ã, –∏–≥—Ä—ã)
- –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –∫–æ–º–º–µ—Ä—Ü–∏—è (–ø–æ–∫—É–ø–∫–∏, –∑–∞–∫–∞–∑—ã, –ø–æ–¥–¥–µ—Ä–∂–∫–∞)

#### 3. üåê **–ü–ª–∞–≥–∏–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**
**–ü–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º –∏ API:**

```python
# –ü—Ä–∏–º–µ—Ä: –ü–ª–∞–≥–∏–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º
class CalendarIntegrationPlugin(Plugin):
    """–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Google Calendar, Outlook, etc."""
    
    def register(self, core):
        # –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤
        intent_registry = core.get_intent_registry()
        intent_registry.register_handler("calendar.*", CalendarHandler(self.api_client))
        
        # –î–æ–±–∞–≤–ª—è–µ—Ç Web API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
        web_api = core.get_web_api()
        web_api.register_routes("/calendar", self.get_calendar_routes())
```

**–°–ª—É—á–∞–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –ö–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã (Google, Outlook, CalDAV)
- –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (Slack, Discord, Teams)
- –û–±–ª–∞—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (Dropbox, OneDrive, AWS)
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö (PostgreSQL, MongoDB)
- IoT –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (HomeAssistant, OpenHAB)

#### 4. üõ†Ô∏è **–ü–ª–∞–≥–∏–Ω—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤**
**–£–ª—É—á—à–∞—é—Ç –æ–ø—ã—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã:**

```python
# –ü—Ä–∏–º–µ—Ä: –ü–ª–∞–≥–∏–Ω –æ—Ç–ª–∞–¥–∫–∏
class DebugPlugin(Plugin):
    """–î–æ–±–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–ª–∞–¥–∫–∏ –∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è"""
    
    def register(self, core):
        # –î–æ–±–∞–≤–ª—è–µ—Ç middleware –æ—Ç–ª–∞–¥–∫–∏
        core.add_middleware(DebugMiddleware())
        
        # –î–æ–±–∞–≤–ª—è–µ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –æ—Ç–ª–∞–¥–∫–∏
        web_api = core.get_web_api()
        web_api.register_routes("/debug", self.get_debug_routes())
```

**–°–ª—É—á–∞–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
- –§—Ä–µ–π–º–≤–æ—Ä–∫–∏ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –°–±–æ—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

#### 5. üéº **–ü–ª–∞–≥–∏–Ω—ã –∫–∞—Å—Ç–æ–º–Ω—ã—Ö workflow**
**–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ä–∫–µ—Å—Ç—Ä–æ–≤–∫–∏ workflow:**

```python
# –ü—Ä–∏–º–µ—Ä: –ü–ª–∞–≥–∏–Ω –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è –≤—Å—Ç—Ä–µ—á
class MeetingAssistantPlugin(Plugin):
    """–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π workflow –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤—Å—Ç—Ä–µ—á"""
    
    def register(self, core):
        # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–π workflow
        workflow_manager = core.get_workflow_manager()
        workflow_manager.register_workflow("meeting_assistant", MeetingWorkflow())
```

**–°–ª—É—á–∞–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- Workflow –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è –≤—Å—Ç—Ä–µ—á
- –†–µ–∂–∏–º –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π
- Workflow —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
- –û—Ç—Ä–∞—Å–ª–µ–≤—ã–µ workflow (–º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ, —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ, etc.)

---

## üèóÔ∏è **–ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø–ª–∞–≥–∏–Ω–æ–≤**

### 1. üö´ **–ù–µ–∏–Ω–≤–∞–∑–∏–≤–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ**
```python
# ‚úÖ –•–û–†–û–®–û: –ü–ª–∞–≥–∏–Ω —Ä–∞—Å—à–∏—Ä—è–µ—Ç –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —è–¥—Ä–∞
class WeatherPlugin(Plugin):
    def register(self, core):
        intent_registry = core.get_intent_registry()
        intent_registry.register_handler("weather.*", WeatherHandler())

# ‚ùå –ü–õ–û–•–û: –ü–ª–∞–≥–∏–Ω –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∫–æ–¥ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
class BadPlugin(Plugin):
    def register(self, core):
        # –ù–ï –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
        core.tts_component._add_custom_logic()  # –ü–õ–û–•–û!
```

### 2. üéØ **–ß–∏—Å—Ç–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
```python
class SmartHomePlugin(Plugin):
    def __init__(self, config: SmartHomeConfig):
        self.config = config
        self.hub_client = SmartHomeHubClient(config.hub_url)
        
    def register(self, core):
        # –ß–∏—Å—Ç–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        handler = SmartHomeHandler(self.hub_client, self.config)
        core.get_intent_registry().register_handler("lights.*", handler)
```

### 3. üõ°Ô∏è **–ì—Ä–∞—Ü–∏–æ–∑–Ω—ã–π –æ—Ç–∫–∞–∑**
```python
class ExternalServicePlugin(Plugin):
    async def register(self, core):
        try:
            await self.external_service.connect()
            # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω
            core.get_intent_registry().register_handler("external.*", self.handler)
        except ConnectionError:
            # –ì—Ä–∞—Ü–∏–æ–∑–Ω–∞—è –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è - –ø–ª–∞–≥–∏–Ω –Ω–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
            logger.warning("External service unavailable, plugin disabled")
```

---

## ‚öôÔ∏è **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤**

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–ª–∞–≥–∏–Ω–æ–≤

```toml
# config.toml - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤
[plugins]
# –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤
auto_discover = true
external_paths = ["./plugins/external", "./custom_plugins"]
builtin_contrib_enabled = true

# –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–ª–∞–≥–∏–Ω–æ–≤
[plugins.providers]
# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
enabled = ["azure_tts", "google_asr", "custom_nlu"]

[plugins.intents]
# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ–º–µ–Ω—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤
enabled = ["smart_home", "calendar", "music"]

[plugins.integrations]
# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
enabled = ["google_calendar", "philips_hue", "slack"]

[plugins.tools]
# –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
enabled = ["debug", "analytics"]
debug_mode_only = ["debug", "profiler"]

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤
[plugins.smart_home]
hub_url = "http://192.168.1.100:8123"
api_token = "${SMART_HOME_TOKEN}"

[plugins.google_calendar]
credentials_path = "./credentials/google_calendar.json"
calendar_ids = ["primary", "work@company.com"]
```

---

## üìä **–ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π: –Ø–¥—Ä–æ vs –ü–ª–∞–≥–∏–Ω**

| –¢–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏ | –Ø–¥—Ä–æ | –ü–ª–∞–≥–∏–Ω | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|-------------|------|--------|-------------|
| **TTS/ASR/NLU** | ‚úÖ –Ø–¥—Ä–æ | ‚ùå | –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ |
| **–ë–∞–∑–æ–≤—ã–µ –∏–Ω—Ç–µ–Ω—Ç—ã** (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è, –≤—Ä–µ–º—è) | ‚úÖ –Ø–¥—Ä–æ | ‚ùå | –û–∂–∏–¥–∞–µ—Ç—Å—è –≤ –ª—é–±–æ–º –≥–æ–ª–æ—Å–æ–≤–æ–º –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–µ |
| **–£–º–Ω—ã–π –¥–æ–º** | ‚ùå | ‚úÖ –ü–ª–∞–≥–∏–Ω | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è, –¥–æ–º–µ–Ω-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è |
| **–ö–∞—Å—Ç–æ–º–Ω—ã–π TTS –¥–≤–∏–∂–æ–∫** | ‚ùå | ‚úÖ –ü–ª–∞–≥–∏–Ω | –†–∞—Å—à–∏—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å |
| **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è Workflow** | ‚úÖ –Ø–¥—Ä–æ | ‚ùå | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã |
| **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞** | ‚ùå | ‚úÖ –ü–ª–∞–≥–∏–Ω | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–¥–æ–º–µ–Ω-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è |
| **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ—Ç–ª–∞–¥–∫–∏** | ‚ùå | ‚úÖ –ü–ª–∞–≥–∏–Ω | –¢–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ |
| **–í–Ω–µ—à–Ω–∏–µ API** | ‚ùå | ‚úÖ –ü–ª–∞–≥–∏–Ω | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ |

---

## üéØ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø–ª–∞–≥–∏–Ω–æ–≤**

### 1. üéØ **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —è—Å–Ω–æ—Å—Ç—å**
‚úÖ **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** = –°—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–µ –±–ª–æ–∫–∏ —Å–∏—Å—Ç–µ–º—ã (TTS, ASR, etc.)  
‚úÖ **–ò–Ω—Ç–µ–Ω—Ç—ã** = –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞–º–µ—Ä–µ–Ω–∏–π (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è, —Ç–∞–π–º–µ—Ä—ã, etc.)  
‚úÖ **Workflows** = –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è pipeline  
‚úÖ **–ü–ª–∞–≥–∏–Ω—ã** = –í–Ω–µ—à–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è  

### 2. üîç **–õ—É—á—à–∞—è –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**
‚úÖ –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç–æ—á–Ω–æ –∑–Ω–∞—é—Ç, –≥–¥–µ –Ω–∞–π—Ç–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤  
‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —á–µ—Ç–∫–æ –æ—Ç–¥–µ–ª–µ–Ω—ã –æ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏  
‚úÖ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è workflow –∏–º–µ–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ  

### 3. üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ**
‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å–∏—Å—Ç–µ–º—ã  
‚úÖ –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–Ω—Ç–æ–≤ –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞–¥–ª–µ–∂–∞—â–µ–µ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ  
‚úÖ –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ—Ç–¥–µ–ª–µ–Ω—ã –æ—Ç –ø–ª–∞–≥–∏–Ω–æ–≤  

### 4. üîß **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è**
‚úÖ –õ–µ–≥—á–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤  
‚úÖ –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏  
‚úÖ –õ—É—á—à–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è  

### 5. üîå **–≠–∫–æ—Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**
‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π  
‚úÖ –ü–ª–∞–≥–∏–Ω—ã –º–æ–≥—É—Ç —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è/–æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ  
‚úÖ –°–±–æ–∏ –ø–ª–∞–≥–∏–Ω–æ–≤ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å  
‚úÖ –°—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç —Ä–∞—Å—à–∏—Ä—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å  
‚úÖ –°–æ–æ–±—â–µ—Å—Ç–≤–æ –º–æ–∂–µ—Ç –≤–Ω–æ—Å–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã  
‚úÖ –ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –ø—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏  

### 6. üöÄ **–ì–∏–±–∫–æ—Å—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è**
‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (—Ç–æ–ª—å–∫–æ —è–¥—Ä–æ)  
‚úÖ –î–æ–º–µ–Ω-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è (—è–¥—Ä–æ + —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–ª–∞–≥–∏–Ω—ã)  
‚úÖ –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è (—è–¥—Ä–æ + –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–ª–∞–≥–∏–Ω–æ–≤)  

---

## üìã **–ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ**

### Phase 1: –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```bash
# –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å universal –ø–ª–∞–≥–∏–Ω—ã –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
mkdir -p irene/components
mv irene/plugins/builtin/universal_tts_plugin.py irene/components/tts_component.py
mv irene/plugins/builtin/universal_audio_plugin.py irene/components/audio_component.py
mv irene/plugins/builtin/universal_asr_plugin.py irene/components/asr_component.py
mv irene/plugins/builtin/universal_llm_plugin.py irene/components/llm_component.py

# –û–±–Ω–æ–≤–∏—Ç—å –∏–º–µ–Ω–∞ –∫–ª–∞—Å—Å–æ–≤ (UniversalTTSPlugin ‚Üí TTSComponent)
```

### Phase 2: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤
```bash
# –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤
mkdir -p irene/intents/handlers
# –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤ –∏–∑ plugins/builtin –≤ intents/handlers
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã —è–¥—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤
```

### Phase 3: –°–æ–∑–¥–∞–Ω–∏–µ workflows
```bash
# –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É workflow
mkdir -p irene/workflows
# –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É workflow –∏–∑ —Ç–µ–∫—É—â–∏—Ö –ø–ª–∞–≥–∏–Ω–æ–≤
```

### Phase 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
# –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã import
# –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
# –û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤
```

**–í –∏—Ç–æ–≥–µ: –ü–ª–∞–≥–∏–Ω—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—é –±–µ–∑ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤ —Å –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞!** 